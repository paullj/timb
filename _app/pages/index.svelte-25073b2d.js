import{S as Ie,i as Se,s as Le,l as ce,g as k,e as z,k as q,c as N,a as v,m as F,d as h,b as n,N as C,I as m,O as ie,t as J,h as x,j as Ve,f as ne,P as he,Q,R as me,M as fe,T as Ue,v as qe,U as $,V as de,W as we,X as Fe,Y as ke,Z as Ce,_ as Oe,$ as Pe,a0 as De,a1 as je,G as L,H as V}from"../chunks/vendor-ce8ace9e.js";import{b as ye}from"../chunks/paths-4b3c6e7e.js";const oe=[{comments:["timb(re) - musical creative coding","click play and then on the dots above to hear more!"],code:"[[0,4,7,9].map(n=>f(220,n))[m%2+b%3],-110*(1+m%2),r(5,8)[b]-1]"},{comments:["each dot is a beat, to play a note","return a frequency from 1 to 10000 hz"],code:"440"},{comments:["frequencies greater than 0 use a sine wave","while negative frequencies use a square wave"],code:"-440"},{comments:["return 0 for a click","this can be useful for drum rhythms"],code:"0"},{comments:["`m` is the current measure (0-7)","and `b`, the beat in the current mesasure (0-7)"],code:"(1+m%2)*110*[1,2,3,4][b%4]"},{comments:["`t` is for time","and `i` is index (0-63)"],code:"440+t*[0,1,2,1][i%4]"},{comments:["NaN and other non number values are rest notes","this allows for intesting rhythms"],code:"440*[2,NaN,1,NaN,1,NaN,1,NaN][i%8]"},{comments:["returning an array plays all frequencies as a chord","you can play a maximum of 4 notes at the same time"],code:"[NaN,[440,220,110],[220,110,880]][i%2*(1+m%2)]"},{comments:["`f(b,i)` gives you `i` semitones from base frequency `b`","nb. 440Hz is a4. MAKE THIS A BETTER MSG"],code:"[0,3,5,7].map(n=>f(440,n))[b%4]"},{comments:["`r(o,t)` gives indexes for euclidean rhythm patterns","EXPLAIN THIS BETTER goto /about for more"],code:"[NaN,0][r(3,8)[b]]"},{comments:["`Math` functions are available in scope","more room for creativity WRITE SOMETHING INTERESTING"],code:"440+110*sin(t)+220*cos(2*t)"},{comments:["an attempt at twinkle twinkle little star","can you make it nicer/smaller/better?"],code:"[...'0077997~5544220~7755442~7755442~'].map(n=>f(440,n))[i%32]"},{comments:["now its your turn","remember that you are limited to 64 bytes"],code:"'HAVE FUN :)'"}];function Ee(o,e,t){const l=o.slice();return l[19]=e[t],l}function ze(o,e,t){const l=o.slice();return l[22]=e[t],l[24]=t,l}function Ne(o,e,t){const l=o.slice();l[22]=e[t],l[29]=t;const r=l[5]*O+l[6];l[25]=r;const a=l[24]*O+l[29];l[26]=a;const s=l[9](l[4]+l[26]*.25,l[26],l[24],l[29]).sort(xe);return l[27]=s,l}function Me(o,e,t){const l=o.slice();return l[22]=e[t],l[31]=t,l}function Ge(o){let e,t;return{c(){e=L("svg"),t=L("path"),this.h()},l(l){e=V(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var r=v(e);t=V(r,"path",{d:!0,stroke:!0,"stroke-linejoin":!0}),v(t).forEach(h),r.forEach(h),this.h()},h(){n(t,"d","M4.5 12.5v-10l7 5-7 5z"),n(t,"stroke","currentColor"),n(t,"stroke-linejoin","round"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-58r9dl")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Xe(o){let e,t;return{c(){e=L("svg"),t=L("path"),this.h()},l(l){e=V(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var r=v(e);t=V(r,"path",{d:!0,stroke:!0}),v(t).forEach(h),r.forEach(h),this.h()},h(){n(t,"d","M5.5 3v9m4-9v9"),n(t,"stroke","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-58r9dl")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Qe(o){let e,t;return{c(){e=L("svg"),t=L("path"),this.h()},l(l){e=V(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var r=v(e);t=V(r,"path",{d:!0,fill:!0}),v(t).forEach(h),r.forEach(h),this.h()},h(){n(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1z"),n(t,"fill","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-58r9dl")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function We(o){let e,t;return{c(){e=L("svg"),t=L("path"),this.h()},l(l){e=V(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var r=v(e);t=V(r,"path",{d:!0,fill:!0}),v(t).forEach(h),r.forEach(h),this.h()},h(){n(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1zm2-2v7h1V4h-1z"),n(t,"fill","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-58r9dl")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Ke(o){let e,t;return{c(){e=L("svg"),t=L("path"),this.h()},l(l){e=V(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var r=v(e);t=V(r,"path",{d:!0,fill:!0}),v(t).forEach(h),r.forEach(h),this.h()},h(){n(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1zm2-2v7h1V4h-1zm2-2v11h1V2h-1z"),n(t,"fill","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-58r9dl")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Ye(o){let e;return{c(){e=z("div"),this.h()},l(t){e=N(t,"DIV",{class:!0,style:!0}),v(e).forEach(h),this.h()},h(){n(e,"class","note svelte-58r9dl"),ne(e,"--index",o[31]),ne(e,"--scale",o[11](o[27][o[31]],o[25]-o[26])),C(e,"overlay",o[31]>0),C(e,"click",o[27][o[31]]===0),C(e,"triangle",o[27][o[31]]<0)},m(t,l){k(t,e,l)},p(t,l){l[0]&624&&ne(e,"--scale",t[11](t[27][t[31]],t[25]-t[26])),l[0]&528&&C(e,"click",t[27][t[31]]===0),l[0]&528&&C(e,"triangle",t[27][t[31]]<0)},d(t){t&&h(e)}}}function Ze(o){let e;return{c(){e=z("div"),this.h()},l(t){e=N(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){n(e,"class","note rest svelte-58r9dl")},m(t,l){k(t,e,l)},p:fe,d(t){t&&h(e)}}}function Ae(o){let e,t;function l(s,i){return i[0]&528&&(e=null),e==null&&(e=!!(s[27][s[31]]===null||Number.isNaN(s[27][s[31]]))),e?Ze:Ye}let r=l(o,[-1,-1]),a=r(o);return{c(){a.c(),t=ce()},l(s){a.l(s),t=ce()},m(s,i){a.m(s,i),k(s,t,i)},p(s,i){r===(r=l(s,i))&&a?a.p(s,i):(a.d(1),a=r(s),a&&(a.c(),a.m(t.parentNode,t)))},d(s){a.d(s),s&&h(t)}}}function Te(o){let e,t,l={length:o[27].length||0},r=[];for(let a=0;a<l.length;a+=1)r[a]=Ae(Me(o,l,a));return{c(){e=z("div");for(let a=0;a<r.length;a+=1)r[a].c();t=q(),this.h()},l(a){e=N(a,"DIV",{class:!0});var s=v(e);for(let i=0;i<r.length;i+=1)r[i].l(s);t=F(s),s.forEach(h),this.h()},h(){n(e,"class","beat svelte-58r9dl"),C(e,"indicator",o[25]===o[26])},m(a,s){k(a,e,s);for(let i=0;i<r.length;i+=1)r[i].m(e,null);m(e,t)},p(a,s){if(s[0]&2672){l={length:a[27].length||0};let i;for(i=0;i<l.length;i+=1){const _=Me(a,l,i);r[i]?r[i].p(_,s):(r[i]=Ae(_),r[i].c(),r[i].m(e,t))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}s[0]&96&&C(e,"indicator",a[25]===a[26])},d(a){a&&h(e),ie(r,a)}}}function Re(o){let e,t={length:O},l=[];for(let r=0;r<t.length;r+=1)l[r]=Te(Ne(o,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ce()},l(r){for(let a=0;a<l.length;a+=1)l[a].l(r);e=ce()},m(r,a){for(let s=0;s<l.length;s+=1)l[s].m(r,a);k(r,e,a)},p(r,a){if(a[0]&2672){t={length:O};let s;for(s=0;s<t.length;s+=1){const i=Ne(r,t,s);l[s]?l[s].p(i,a):(l[s]=Te(i),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(r){ie(l,r),r&&h(e)}}}function He(o){let e,t,l=o[19]+"",r;return{c(){e=z("label"),t=J("// "),r=J(l),this.h()},l(a){e=N(a,"LABEL",{for:!0,class:!0});var s=v(e);t=x(s,"// "),r=x(s,l),s.forEach(h),this.h()},h(){n(e,"for","code"),n(e,"class","comment svelte-58r9dl")},m(a,s){k(a,e,s),m(e,t),m(e,r)},p(a,s){s[0]&256&&l!==(l=a[19]+"")&&Ve(r,l)},d(a){a&&h(e)}}}function Je(o){let e,t,l,r,a,s,i,_,R,p,y,P,W,H,ee,D,te,le,K,B,re,A,f,T,Y;function se(c,d){return c[7]?Xe:Ge}let I=se(o),g=I(o);function E(c,d){return c[1]>=.65?Ke:c[1]>=.35?We:Qe}let G=E(o),M=G(o),U={length:ae},b=[];for(let c=0;c<U.length;c+=1)b[c]=Re(ze(o,U,c));let Z=o[8],w=[];for(let c=0;c<Z.length;c+=1)w[c]=He(Ee(o,Z,c));return{c(){e=z("form"),t=z("button"),g.c(),l=q(),r=z("button"),M.c(),a=q(),s=z("input"),i=q(),_=z("div");for(let c=0;c<b.length;c+=1)b[c].c();R=q(),p=z("form"),y=z("label"),P=J("// hit `enter` to save your code in the URL"),W=q(),H=z("label"),ee=J("// to learn more click on the dots above or "),D=z("a"),te=J("here"),le=q();for(let c=0;c<w.length;c+=1)w[c].c();K=q(),B=z("label"),re=J("(t,i,m,b) =>"),A=q(),f=z("input"),this.h()},l(c){e=N(c,"FORM",{});var d=v(e);t=N(d,"BUTTON",{class:!0});var u=v(t);g.l(u),u.forEach(h),l=F(d),r=N(d,"BUTTON",{class:!0});var j=v(r);M.l(j),j.forEach(h),a=F(d),s=N(d,"INPUT",{type:!0,name:!0,step:!0,min:!0,max:!0,id:!0}),d.forEach(h),i=F(c),_=N(c,"DIV",{class:!0,style:!0});var _e=v(_);for(let X=0;X<b.length;X+=1)b[X].l(_e);_e.forEach(h),R=F(c),p=N(c,"FORM",{class:!0});var S=v(p);y=N(S,"LABEL",{for:!0,class:!0});var pe=v(y);P=x(pe,"// hit `enter` to save your code in the URL"),pe.forEach(h),W=F(S),H=N(S,"LABEL",{for:!0,class:!0});var ue=v(H);ee=x(ue,"// to learn more click on the dots above or "),D=N(ue,"A",{href:!0});var ge=v(D);te=x(ge,"here"),ge.forEach(h),ue.forEach(h),le=F(S);for(let X=0;X<w.length;X+=1)w[X].l(S);K=F(S),B=N(S,"LABEL",{id:!0,for:!0,class:!0});var be=v(B);re=x(be,"(t,i,m,b) =>"),be.forEach(h),A=F(S),f=N(S,"INPUT",{id:!0,name:!0,type:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),S.forEach(h),this.h()},h(){n(t,"class","svelte-58r9dl"),n(r,"class","mute-button svelte-58r9dl"),C(r,"active",o[0]),n(s,"type","range"),n(s,"name",""),n(s,"step","0.1"),n(s,"min","0.0"),n(s,"max","1.0"),s.disabled=o[0],n(s,"id",""),n(_,"class","container svelte-58r9dl"),ne(_,"--beats",O),ne(_,"--meausures",ae),n(y,"for","code"),n(y,"class","comment focused svelte-58r9dl"),n(D,"href",""+(ye+"about")),n(H,"for","code"),n(H,"class","comment focused svelte-58r9dl"),n(B,"id","label"),n(B,"for","code"),n(B,"class","svelte-58r9dl"),n(f,"id","input"),n(f,"name","code"),n(f,"type","text"),n(f,"spellcheck","false"),n(f,"autocomplete","off"),n(f,"maxlength","64"),n(f,"class","svelte-58r9dl"),n(p,"class","editor svelte-58r9dl")},m(c,d){k(c,e,d),m(e,t),g.m(t,null),m(e,l),m(e,r),M.m(r,null),m(e,a),m(e,s),he(s,o[1]),k(c,i,d),k(c,_,d);for(let u=0;u<b.length;u+=1)b[u].m(_,null);k(c,R,d),k(c,p,d),m(p,y),m(y,P),m(p,W),m(p,H),m(H,ee),m(H,D),m(D,te),m(p,le);for(let u=0;u<w.length;u+=1)w[u].m(p,null);m(p,K),m(p,B),m(B,re),m(p,A),m(p,f),he(f,o[3]),T||(Y=[Q(t,"click",me(o[12])),Q(r,"click",me(o[13])),Q(s,"change",o[14]),Q(s,"input",o[14]),Q(_,"click",o[15]),Q(f,"input",o[16]),Q(p,"submit",me(o[17]))],T=!0)},p(c,d){if(I!==(I=se(c))&&(g.d(1),g=I(c),g&&(g.c(),g.m(t,null))),G!==(G=E(c))&&(M.d(1),M=G(c),M&&(M.c(),M.m(r,null))),d[0]&1&&C(r,"active",c[0]),d[0]&1&&(s.disabled=c[0]),d[0]&2&&he(s,c[1]),d[0]&2672){U={length:ae};let u;for(u=0;u<U.length;u+=1){const j=ze(c,U,u);b[u]?b[u].p(j,d):(b[u]=Re(j),b[u].c(),b[u].m(_,null))}for(;u<b.length;u+=1)b[u].d(1);b.length=U.length}if(d[0]&256){Z=c[8];let u;for(u=0;u<Z.length;u+=1){const j=Ee(c,Z,u);w[u]?w[u].p(j,d):(w[u]=He(j),w[u].c(),w[u].m(p,K))}for(;u<w.length;u+=1)w[u].d(1);w.length=Z.length}d[0]&8&&f.value!==c[3]&&he(f,c[3])},i:fe,o:fe,d(c){c&&h(e),g.d(),M.d(),c&&h(i),c&&h(_),ie(b,c),c&&h(R),c&&h(p),ie(w,c),T=!1,Ue(Y)}}}const ve=1e4,O=8,ae=8;function Be(o,e,t){return Math.min(Math.max(o,e),t)}const xe=(o,e)=>e-o;function $e(o,e,t){let l=0,r=0,a=0,s=!1,i=!1,_=.2;qe(()=>{H(),window.f=(I,g)=>I*1.059463**g,window.r=(I,g)=>{for(var E=null,G=[],M=0;M<g;M++){var U=Math.floor(I/g*M);G.push(U===E?0:1),E=U}return G},$().volume.set({value:de(_)});const A=new we,f=new we,T=new Fe({urls:{C3:"/click.mp3"},release:1,baseUrl:ye});f.set({oscillator:{type:"sine"},envelope:{attack:.2,decay:.5,release:1}}),f.set({detune:.1,volume:de(.2),oscillator:{type:"square"},envelope:{attack:.05,decay:.1}}),A.connect($()),f.connect($()),T.connect($()),ke.scheduleRepeat(I=>{let g=P(I,r*O+a,r,a);Array.isArray(g)&&(g=g.splice(0,4).map(E=>Number.parseFloat(E)).filter(E=>E!==null&&!Number.isNaN(E)),g.forEach(E=>{E===0?T.triggerAttackRelease("C3","16n"):E>0?A.triggerAttackRelease(Be(E,1,ve),"8n"):f.triggerAttackRelease(Be(Math.abs(E),1,ve),"8n")})),t(5,r=(r+Math.floor((a+1)/O))%ae),t(6,a=(a+1)%O)},"8n");let Y=requestAnimationFrame(se);function se(){Y=requestAnimationFrame(se),t(4,l=Ce())}return()=>cancelAnimationFrame(Y)});let R=0,p=oe[0].comments,y=oe[0].code,P;const W=()=>history.pushState(null,"",`#${encodeURIComponent(y)}`),H=()=>{location.hash&&t(3,y=decodeURIComponent(location.hash.slice(1)))},ee=(A,f)=>{const T=Math.abs(f/(ae*O));return A===0?1.25-.75*Oe(T):Pe(1-Math.abs(A/ve))*(1-T/2)},D=async()=>{await De(),console.log("audio is ready"),t(7,s=ke.toggle().state==="started")},te=()=>t(0,i=!i);function le(){_=je(this.value),t(1,_)}const K=()=>t(2,R=(R+1)%oe.length);function B(){y=this.value,t(3,y),t(2,R)}const re=()=>{W()};return o.$$.update=()=>{var A,f,T;if(o.$$.dirty[0]&1&&($().mute=i),o.$$.dirty[0]&2&&((f=(A=$())==null?void 0:A.volume)==null||f.rampTo(de(_),.05)),o.$$.dirty[0]&4&&(t(3,y=oe[R].code),t(8,p=(T=oe[R].comments)!=null?T:[])),o.$$.dirty[0]&8)try{t(9,P=new Function("t","i","m","b",`
			try { 
        with (Math)
          return [${y}].flat()
			} catch(error){
				return [0];
			}`))}catch{t(9,P=()=>[0])}},[i,_,R,y,l,r,a,s,p,P,W,ee,D,te,le,K,B,re]}class lt extends Ie{constructor(e){super();Se(this,e,$e,Je,Le,{},null,[-1,-1])}}export{lt as default};
