import{S as Ve,i as je,s as ze,l as he,g as T,e as k,k as V,c as E,a as w,m as j,d as u,b as m,L as F,G as f,M as me,t as A,h as M,j as be,f as ae,N as Me,O as Z,P as re,K as pe,Q as Qe,v as Xe,R as le,T as ve,U as Le,V as Ge,W as He,X as ge,Y as Ke,Z as We,_ as Ye}from"../chunks/vendor-4bfbdffa.js";import{b as Ue}from"../chunks/paths-4b3c6e7e.js";const ce=[{comments:["timb(re) - musical creative coding","click play and then on the dots above to hear more!"],code:"[[0,4,7,9].map(n=>f(220,n))[m%2+b%3],-110*(1+m%2),r(5,8)[b]-1]"},{comments:["each dot is a beat, to play a note","return a frequency from 1 to 10000 hz"],code:"440"},{comments:["frequencies greater than 0 use a sine wave","while negative frequencies use a square wave"],code:"-440"},{comments:["return 0 for a click","this can be useful for drum rhythms"],code:"0"},{comments:["`m` is the current measure (0-7)","and `b`, the beat in the current mesasure (0-7)"],code:"(1 + m % 2) * 110 * [1, 2, 3, 4][b % 4]"},{comments:["`t` is for time","and `i` is index (0-63)"],code:"20 * (t % 100) * [0, 1, 2, 1][i % 4]"},{comments:["NaN, undefined and other non number values are rest notes","this allows for coding intesting rhythms"],code:"440 * [2, 1, NaN, 1][i % 4]"},{comments:["returning an array plays all frequencies as a chord","you can play a maximum of 4 notes at the same time"],code:"[[261.63, 329.628, 391.995], NaN][b % 4]"},{comments:["`f(b,i)` gives you `i` semitones from base frequency `b`","this is useful for making western tonal music (440Hz is a4)"],code:"[0, 3, 5, 7].map(n => f(440, n))[b % 4]"},{comments:["`r(o,p)` gives euclidean rhythm patterns as arrays of 1s & 0s","it spreads out `o` onsets across `p` pulses`"],code:"[NaN, 0][r(3, 8)[b]]"},{comments:["no need for `Math.`, math functions are available in scope","this gives you more room for creativity"],code:"110 * sin(t) + 220 * cos(2 * t)"},{comments:["here is my attempt at twinkle twinkle little star","can you make it nicer/smaller/better?"],code:"[...'0077997~5544220~7755442~7755442'].map(n=>f(440,n))[i%32]"},{comments:["you are limited to 64 bytes, use creative ways to shorten","eg. `b^0` is equivalent to `b!=0`, every byte counts!"],code:"b^0?440:-220"},{comments:["now its your turn","have fun!"],code:"'*your next masterpiece*'"}];function Se(o,t,e){const l=o.slice();return l[22]=t[e],l}function qe(o,t,e){const l=o.slice();return l[25]=t[e],l[27]=e,l}function Be(o,t,e){const l=o.slice();l[25]=t[e],l[32]=e;const a=l[6]*G+l[7];l[28]=a;const n=l[27]*G+l[32];l[29]=n;const s=l[11](l[5]+l[29]*.25,l[29],l[27],l[32]).sort(tt);return l[30]=s,l}function Fe(o,t,e){const l=o.slice();return l[25]=t[e],l[34]=e,l}function Ze(o){let t;return{c(){t=A("play")},l(e){t=M(e,"play")},m(e,l){T(e,t,l)},d(e){e&&u(t)}}}function Je(o){let t;return{c(){t=A("pause")},l(e){t=M(e,"pause")},m(e,l){T(e,t,l)},d(e){e&&u(t)}}}function xe(o){let t;return{c(){t=k("div"),this.h()},l(e){t=E(e,"DIV",{class:!0}),w(t).forEach(u),this.h()},h(){m(t,"class","note rest svelte-m5ao07")},m(e,l){T(e,t,l)},p:pe,d(e){e&&u(t)}}}function $e(o){let t;return{c(){t=k("div"),this.h()},l(e){t=E(e,"DIV",{class:!0,style:!0}),w(t).forEach(u),this.h()},h(){m(t,"class","note svelte-m5ao07"),ae(t,"--index",o[34]),ae(t,"--scale",o[13](o[30][o[34]],o[28]-o[29])),F(t,"overlay",o[34]>0),F(t,"click",o[30][o[34]]===0),F(t,"triangle",o[30][o[34]]<0)},m(e,l){T(e,t,l)},p(e,l){l[0]&2272&&ae(t,"--scale",e[13](e[30][e[34]],e[28]-e[29])),l[0]&2080&&F(t,"click",e[30][e[34]]===0),l[0]&2080&&F(t,"triangle",e[30][e[34]]<0)},d(e){e&&u(t)}}}function Ie(o){let t,e;function l(s,c){return c[0]&2080&&(t=null),t==null&&(t=s[30][s[34]]!=null&&!Number.isNaN(s[30][s[34]])),t?$e:xe}let a=l(o,[-1,-1]),n=a(o);return{c(){n.c(),e=he()},l(s){n.l(s),e=he()},m(s,c){n.m(s,c),T(s,e,c)},p(s,c){a===(a=l(s,c))&&n?n.p(s,c):(n.d(1),n=a(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){n.d(s),s&&u(e)}}}function Oe(o){let t,e,l={length:o[30].length||0},a=[];for(let n=0;n<l.length;n+=1)a[n]=Ie(Fe(o,l,n));return{c(){t=k("div");for(let n=0;n<a.length;n+=1)a[n].c();e=V(),this.h()},l(n){t=E(n,"DIV",{class:!0});var s=w(t);for(let c=0;c<a.length;c+=1)a[c].l(s);e=j(s),s.forEach(u),this.h()},h(){m(t,"class","beat svelte-m5ao07"),F(t,"indicator",o[28]===o[29])},m(n,s){T(n,t,s);for(let c=0;c<a.length;c+=1)a[c].m(t,null);f(t,e)},p(n,s){if(s[0]&10464){l={length:n[30].length||0};let c;for(c=0;c<l.length;c+=1){const d=Fe(n,l,c);a[c]?a[c].p(d,s):(a[c]=Ie(d),a[c].c(),a[c].m(t,e))}for(;c<a.length;c+=1)a[c].d(1);a.length=l.length}s[0]&192&&F(t,"indicator",n[28]===n[29])},d(n){n&&u(t),me(a,n)}}}function De(o){let t,e={length:G},l=[];for(let a=0;a<e.length;a+=1)l[a]=Oe(Be(o,e,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();t=he()},l(a){for(let n=0;n<l.length;n+=1)l[n].l(a);t=he()},m(a,n){for(let s=0;s<l.length;s+=1)l[s].m(a,n);T(a,t,n)},p(a,n){if(n[0]&10464){e={length:G};let s;for(s=0;s<e.length;s+=1){const c=Be(a,e,s);l[s]?l[s].p(c,n):(l[s]=Oe(c),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=e.length}},d(a){me(l,a),a&&u(t)}}}function Ce(o){let t,e,l=o[22]+"",a;return{c(){t=k("label"),e=A("// "),a=A(l),this.h()},l(n){t=E(n,"LABEL",{for:!0,class:!0});var s=w(t);e=M(s,"// "),a=M(s,l),s.forEach(u),this.h()},h(){m(t,"for","code"),m(t,"class","comment svelte-m5ao07")},m(n,s){T(n,t,s),f(t,e),f(t,a)},p(n,s){s[0]&1024&&l!==(l=n[22]+"")&&be(a,l)},d(n){n&&u(t)}}}function et(o){let t,e,l,a,n,s,c,d,I=(o[0]?"unmute":"mute")+"",z,O,b,q,D=o[4].toFixed(2)+"",K,oe,J,R,x,_,Q,se,ne,C,L,p,U,B,S,N,$,W,v,_e,ke;function Ee(r,h){return r[9]?Je:Ze}let ue=Ee(o),X=ue(o),ee={length:ie},g=[];for(let r=0;r<ee.length;r+=1)g[r]=De(qe(o,ee,r));let te=o[10],y=[];for(let r=0;r<te.length;r+=1)y[r]=Ce(Se(o,te,r));return{c(){t=k("form"),e=k("button"),X.c(),l=V(),a=k("button"),n=A("stop"),c=V(),d=k("button"),z=A(I),O=V(),b=k("button"),q=A("volume ("),K=A(D),oe=A(")"),J=V(),R=k("div");for(let r=0;r<g.length;r+=1)g[r].c();x=V(),_=k("form"),Q=k("label"),se=A("// hit `enter` to save your code in the URL"),ne=V(),C=k("label"),L=A("// to learn more click on the dots above or "),p=k("a"),U=A("here"),B=V();for(let r=0;r<y.length;r+=1)y[r].c();S=V(),N=k("label"),$=A("(t,i,m,b) =>"),W=V(),v=k("input"),this.h()},l(r){t=E(r,"FORM",{class:!0});var h=w(t);e=E(h,"BUTTON",{});var i=w(e);X.l(i),i.forEach(u),l=j(h),a=E(h,"BUTTON",{});var H=w(a);n=M(H,"stop"),H.forEach(u),c=j(h),d=E(h,"BUTTON",{class:!0});var Ne=w(d);z=M(Ne,I),Ne.forEach(u),O=j(h),b=E(h,"BUTTON",{class:!0});var fe=w(b);q=M(fe,"volume ("),K=M(fe,D),oe=M(fe,")"),fe.forEach(u),h.forEach(u),J=j(r),R=E(r,"DIV",{class:!0,style:!0});var we=w(R);for(let Y=0;Y<g.length;Y+=1)g[Y].l(we);we.forEach(u),x=j(r),_=E(r,"FORM",{class:!0});var P=w(_);Q=E(P,"LABEL",{for:!0,class:!0});var Re=w(Q);se=M(Re,"// hit `enter` to save your code in the URL"),Re.forEach(u),ne=j(P),C=E(P,"LABEL",{for:!0,class:!0});var de=w(C);L=M(de,"// to learn more click on the dots above or "),p=E(de,"A",{href:!0});var Te=w(p);U=M(Te,"here"),Te.forEach(u),de.forEach(u),B=j(P);for(let Y=0;Y<y.length;Y+=1)y[Y].l(P);S=j(P),N=E(P,"LABEL",{id:!0,for:!0});var Ae=w(N);$=M(Ae,"(t,i,m,b) =>"),Ae.forEach(u),W=j(P),v=E(P,"INPUT",{id:!0,name:!0,type:!0,spellcheck:!0,autocomplete:!0,maxlength:!0}),P.forEach(u),this.h()},h(){a.disabled=s=o[6]+o[7]===0,m(d,"class","mute-button"),F(d,"active",o[0]),m(b,"class","mute-button"),b.disabled=o[0],F(b,"active",o[0]),m(t,"class","controls svelte-m5ao07"),m(R,"class","container svelte-m5ao07"),ae(R,"--beats",G),ae(R,"--meausures",ie),m(Q,"for","code"),m(Q,"class","comment focus-only svelte-m5ao07"),m(p,"href",""+(Ue+"/about")),m(C,"for","code"),m(C,"class","comment focus-only svelte-m5ao07"),m(N,"id","label"),m(N,"for","code"),m(v,"id","input"),m(v,"name","code"),m(v,"type","text"),m(v,"spellcheck","false"),m(v,"autocomplete","off"),m(v,"maxlength","64"),m(_,"class","editor svelte-m5ao07")},m(r,h){T(r,t,h),f(t,e),X.m(e,null),f(t,l),f(t,a),f(a,n),f(t,c),f(t,d),f(d,z),f(t,O),f(t,b),f(b,q),f(b,K),f(b,oe),T(r,J,h),T(r,R,h);for(let i=0;i<g.length;i+=1)g[i].m(R,null);T(r,x,h),T(r,_,h),f(_,Q),f(Q,se),f(_,ne),f(_,C),f(C,L),f(C,p),f(p,U),f(_,B);for(let i=0;i<y.length;i+=1)y[i].m(_,null);f(_,S),f(_,N),f(N,$),f(_,W),f(_,v),Me(v,o[3]),_e||(ke=[Z(e,"click",re(o[14])),Z(a,"click",re(o[15])),Z(d,"click",re(o[16])),Z(b,"click",re(o[17])),Z(R,"click",o[18]),Z(v,"input",o[19]),Z(_,"submit",re(o[20]))],_e=!0)},p(r,h){if(ue!==(ue=Ee(r))&&(X.d(1),X=ue(r),X&&(X.c(),X.m(e,null))),h[0]&192&&s!==(s=r[6]+r[7]===0)&&(a.disabled=s),h[0]&1&&I!==(I=(r[0]?"unmute":"mute")+"")&&be(z,I),h[0]&1&&F(d,"active",r[0]),h[0]&16&&D!==(D=r[4].toFixed(2)+"")&&be(K,D),h[0]&1&&(b.disabled=r[0]),h[0]&1&&F(b,"active",r[0]),h[0]&10464){ee={length:ie};let i;for(i=0;i<ee.length;i+=1){const H=qe(r,ee,i);g[i]?g[i].p(H,h):(g[i]=De(H),g[i].c(),g[i].m(R,null))}for(;i<g.length;i+=1)g[i].d(1);g.length=ee.length}if(h[0]&1024){te=r[10];let i;for(i=0;i<te.length;i+=1){const H=Se(r,te,i);y[i]?y[i].p(H,h):(y[i]=Ce(H),y[i].c(),y[i].m(_,S))}for(;i<y.length;i+=1)y[i].d(1);y.length=te.length}h[0]&8&&v.value!==r[3]&&Me(v,r[3])},i:pe,o:pe,d(r){r&&u(t),X.d(),r&&u(J),r&&u(R),me(g,r),r&&u(x),r&&u(_),me(y,r),_e=!1,Qe(ke)}}}const ye=1e4,G=8,ie=8;function Pe(o,t,e){return Math.min(Math.max(o,t),e)}const tt=(o,t)=>t-o;function lt(o,t,e){let l,a=0,n=0,s=0,c=!1,d=!1,I=!1,z=0;Xe(()=>{oe(),window.f=(B,S)=>B*1.059463**S,window.r=(B,S)=>{for(var N=null,$=[],W=0;W<S;W++){var v=Math.floor(B/S*W);$.push(v===N?0:1),N=v}return $},le().volume.set({value:ve(l)});const L=new Le,p=new Le,U=new Ge({urls:{C3:"/click.mp3"},release:1,baseUrl:Ue});p.set({oscillator:{type:"sine"},envelope:{attack:.2,decay:.5,release:1}}),p.set({detune:.1,volume:ve(.2),oscillator:{type:"square"},envelope:{attack:.05,decay:.1}}),L.connect(le()),p.connect(le()),U.connect(le()),e(5,a=He()),ge.scheduleRepeat(B=>{e(5,a=B);let S=D(B,n*G+s,n,s);Array.isArray(S)&&S.forEach(N=>{N===0?U.triggerAttackRelease("C3","16n"):N>0?L.triggerAttackRelease(Pe(N,1,ye),"8n"):p.triggerAttackRelease(Pe(Math.abs(N),1,ye),"8n")}),e(6,n=(n+Math.floor((s+1)/G))%ie),e(7,s=(s+1)%G)},"8n")});let O=0,b=ce[0].comments,q=ce[0].code,D;const K=()=>history.pushState(null,"",`#${encodeURIComponent(q)}`),oe=()=>{location.hash&&e(3,q=decodeURIComponent(location.hash.slice(1)))},J=(L,p)=>{const U=Math.abs(p/(ie*G));return L===0?(2-Ke(U)**2)/1.75:We(1-Math.abs(L/ye))*(1-U/2)},R=async()=>{c||(await Ye(),e(8,c=!0),console.log("Audio is ready!")),e(9,d=ge.toggle().state==="started")},x=async()=>{ge.stop(),e(9,d=!1),e(6,n=e(7,s=0))},_=()=>e(0,I=!I),Q=()=>e(1,z=(z+1)%4),se=()=>e(2,O=(O+1)%ce.length);function ne(){q=this.value,e(3,q),e(2,O)}const C=()=>{K()};return o.$$.update=()=>{var L,p,U;if(o.$$.dirty[0]&2&&e(4,l=(z+1)/4),o.$$.dirty[0]&1&&(le().mute=I),o.$$.dirty[0]&16&&((p=(L=le())==null?void 0:L.volume)==null||p.rampTo(ve(l))),o.$$.dirty[0]&4&&(e(3,q=ce[O].code),e(10,b=(U=ce[O].comments)!=null?U:[])),o.$$.dirty[0]&8)try{e(11,D=new Function("t","i","m","b",`
			try { 
        with (Math)
          return [${q}].flat().splice(0,4).map(n => Number.parseFloat(n)).filter(n => n != null && !Number.isNaN(n));
			} catch(error){
				return [0];
			}`))}catch{e(11,D=()=>[0])}},[I,z,O,q,l,a,n,s,c,d,b,D,K,J,R,x,_,Q,se,ne,C]}class nt extends Ve{constructor(t){super();je(this,t,lt,et,ze,{},null,[-1,-1])}}export{nt as default};
