import{S as Be,i as Ie,s as Se,l as ie,g as k,e as z,k as U,c as N,a as _,m as F,d as h,b as s,N as C,I as m,O as ce,t as J,h as x,j as Le,f as oe,P as he,Q,R as me,M as fe,T as Ve,v as Ue,U as $,V as ve,W as we,X as Fe,Y as ke,Z as Ce,_ as Oe,$ as Pe,a0 as De,a1 as je,G as S,H as L}from"../chunks/vendor-ce8ace9e.js";import{b as ye}from"../chunks/paths-4b3c6e7e.js";const se=[{comments:["timb(re) - musical creative coding","click play and then on the dots above to hear more!"],code:"[[0,4,7,9].map(n=>f(220,n))[m%2+b%3],-110*(1+m%2),r(5,8)[b]-1]"},{comments:["each dot is a beat, to play a note","return a frequency from 1 to 10000 hz"],code:"440"},{comments:["frequencies greater than 0 use a sine wave","while negative frequencies use a square wave"],code:"-440"},{comments:["return 0 for a click","this can be useful for drum rhythms"],code:"0"},{comments:["`m` is the current measure (0-7)","and `b`, the beat in the current mesasure (0-7)"],code:"(1+m%2)*110*[1,2,3,4][b%4]"},{comments:["`t` is for time","and `i` is index (0-63)"],code:"440+t*[0,1,2,1][i%4]"},{comments:["NaN and other non number values are rest notes","this allows for intesting rhythms"],code:"440*[2,NaN,1,NaN,1,NaN,1,NaN][i%8]"},{comments:["returning an array plays all frequencies as a chord","you can play a maximum of 4 notes at the same time"],code:"[NaN,[440,220,110],[220,110,880]][i%2*(1+m%2)]"},{comments:["`f(b,i)` gives you `i` semitones from base frequency `b`","nb. 440Hz is a4. MAKE THIS A BETTER MSG"],code:"[0,3,5,7].map(n=>f(440,n))[b%4]"},{comments:["`r(o,t)` gives indexes for euclidean rhythm patterns","EXPLAIN THIS BETTER goto /about for more"],code:"[-50,0][r(3,8)[b]]"},{comments:["`Math` functions are available in scope","more room for creativity WRITE SOMETHING INTERESTING"],code:"110*sin(t)+220*cos(2*t)"},{comments:["an attempt at twinkle twinkle little star","can you make it nicer/smaller/better?"],code:"[...'0077997~5544220~7755442~7755442~'].map(n=>f(440,n))[i%32]"},{comments:["now its your turn","remember that you are limited to 64 bytes"],code:"'HAVE FUN :)'"}];function Ee(o,e,t){const l=o.slice();return l[19]=e[t],l}function ze(o,e,t){const l=o.slice();return l[22]=e[t],l[24]=t,l}function Ne(o,e,t){const l=o.slice();l[22]=e[t],l[29]=t;const r=l[5]*O+l[6];l[25]=r;const a=l[24]*O+l[29];l[26]=a;const n=l[9](l[4]+l[26]*.25,l[26],l[24],l[29]).sort(xe);return l[27]=n,l}function Me(o,e,t){const l=o.slice();return l[22]=e[t],l[31]=t,l}function Ge(o){let e,t;return{c(){e=S("svg"),t=S("path"),this.h()},l(l){e=L(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0});var r=_(e);t=L(r,"path",{d:!0,stroke:!0,"stroke-linejoin":!0}),_(t).forEach(h),r.forEach(h),this.h()},h(){s(t,"d","M4.5 12.5v-10l7 5-7 5z"),s(t,"stroke","currentColor"),s(t,"stroke-linejoin","round"),s(e,"viewBox","0 0 15 15"),s(e,"fill","none"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","15"),s(e,"height","15")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Xe(o){let e,t;return{c(){e=S("svg"),t=S("path"),this.h()},l(l){e=L(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0});var r=_(e);t=L(r,"path",{d:!0,stroke:!0}),_(t).forEach(h),r.forEach(h),this.h()},h(){s(t,"d","M5.5 3v9m4-9v9"),s(t,"stroke","currentColor"),s(e,"viewBox","0 0 15 15"),s(e,"fill","none"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","15"),s(e,"height","15")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Qe(o){let e,t;return{c(){e=S("svg"),t=S("path"),this.h()},l(l){e=L(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0});var r=_(e);t=L(r,"path",{d:!0,fill:!0}),_(t).forEach(h),r.forEach(h),this.h()},h(){s(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1z"),s(t,"fill","currentColor"),s(e,"viewBox","0 0 15 15"),s(e,"fill","none"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","15"),s(e,"height","15")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function We(o){let e,t;return{c(){e=S("svg"),t=S("path"),this.h()},l(l){e=L(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0});var r=_(e);t=L(r,"path",{d:!0,fill:!0}),_(t).forEach(h),r.forEach(h),this.h()},h(){s(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1zm2-2v7h1V4h-1z"),s(t,"fill","currentColor"),s(e,"viewBox","0 0 15 15"),s(e,"fill","none"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","15"),s(e,"height","15")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Ke(o){let e,t;return{c(){e=S("svg"),t=S("path"),this.h()},l(l){e=L(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0});var r=_(e);t=L(r,"path",{d:!0,fill:!0}),_(t).forEach(h),r.forEach(h),this.h()},h(){s(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1zm2-2v7h1V4h-1zm2-2v11h1V2h-1z"),s(t,"fill","currentColor"),s(e,"viewBox","0 0 15 15"),s(e,"fill","none"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","15"),s(e,"height","15")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Ye(o){let e;return{c(){e=z("div"),this.h()},l(t){e=N(t,"DIV",{class:!0,style:!0}),_(e).forEach(h),this.h()},h(){s(e,"class","note svelte-19q7hp"),oe(e,"--index",o[31]),oe(e,"--scale",o[11](o[27][o[31]],o[25]-o[26])),C(e,"overlay",o[31]>0),C(e,"click",o[27][o[31]]===0),C(e,"triangle",o[27][o[31]]<0)},m(t,l){k(t,e,l)},p(t,l){l[0]&624&&oe(e,"--scale",t[11](t[27][t[31]],t[25]-t[26])),l[0]&528&&C(e,"click",t[27][t[31]]===0),l[0]&528&&C(e,"triangle",t[27][t[31]]<0)},d(t){t&&h(e)}}}function Ze(o){let e;return{c(){e=z("div"),this.h()},l(t){e=N(t,"DIV",{class:!0}),_(e).forEach(h),this.h()},h(){s(e,"class","note rest svelte-19q7hp")},m(t,l){k(t,e,l)},p:fe,d(t){t&&h(e)}}}function Ae(o){let e,t;function l(n,c){return c[0]&528&&(e=null),e==null&&(e=!!(n[27][n[31]]===null||Number.isNaN(n[27][n[31]]))),e?Ze:Ye}let r=l(o,[-1,-1]),a=r(o);return{c(){a.c(),t=ie()},l(n){a.l(n),t=ie()},m(n,c){a.m(n,c),k(n,t,c)},p(n,c){r===(r=l(n,c))&&a?a.p(n,c):(a.d(1),a=r(n),a&&(a.c(),a.m(t.parentNode,t)))},d(n){a.d(n),n&&h(t)}}}function Te(o){let e,t,l={length:o[27].length||0},r=[];for(let a=0;a<l.length;a+=1)r[a]=Ae(Me(o,l,a));return{c(){e=z("div");for(let a=0;a<r.length;a+=1)r[a].c();t=U(),this.h()},l(a){e=N(a,"DIV",{class:!0});var n=_(e);for(let c=0;c<r.length;c+=1)r[c].l(n);t=F(n),n.forEach(h),this.h()},h(){s(e,"class","beat svelte-19q7hp"),C(e,"indicator",o[25]===o[26])},m(a,n){k(a,e,n);for(let c=0;c<r.length;c+=1)r[c].m(e,null);m(e,t)},p(a,n){if(n[0]&2672){l={length:a[27].length||0};let c;for(c=0;c<l.length;c+=1){const d=Me(a,l,c);r[c]?r[c].p(d,n):(r[c]=Ae(d),r[c].c(),r[c].m(e,t))}for(;c<r.length;c+=1)r[c].d(1);r.length=l.length}n[0]&96&&C(e,"indicator",a[25]===a[26])},d(a){a&&h(e),ce(r,a)}}}function qe(o){let e,t={length:O},l=[];for(let r=0;r<t.length;r+=1)l[r]=Te(Ne(o,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ie()},l(r){for(let a=0;a<l.length;a+=1)l[a].l(r);e=ie()},m(r,a){for(let n=0;n<l.length;n+=1)l[n].m(r,a);k(r,e,a)},p(r,a){if(a[0]&2672){t={length:O};let n;for(n=0;n<t.length;n+=1){const c=Ne(r,t,n);l[n]?l[n].p(c,a):(l[n]=Te(c),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(r){ce(l,r),r&&h(e)}}}function Re(o){let e,t,l=o[19]+"",r;return{c(){e=z("label"),t=J("// "),r=J(l),this.h()},l(a){e=N(a,"LABEL",{for:!0,class:!0});var n=_(e);t=x(n,"// "),r=x(n,l),n.forEach(h),this.h()},h(){s(e,"for","code"),s(e,"class","comment svelte-19q7hp")},m(a,n){k(a,e,n),m(e,t),m(e,r)},p(a,n){n[0]&256&&l!==(l=a[19]+"")&&Le(r,l)},d(a){a&&h(e)}}}function Je(o){let e,t,l,r,a,n,c,d,q,p,y,P,W,R,ee,D,te,le,K,H,re,A,f,T,Y;function ne(i,v){return i[7]?Xe:Ge}let B=ne(o),g=B(o);function E(i,v){return i[1]>=.65?Ke:i[1]>=.35?We:Qe}let G=E(o),M=G(o),V={length:ae},b=[];for(let i=0;i<V.length;i+=1)b[i]=qe(ze(o,V,i));let Z=o[8],w=[];for(let i=0;i<Z.length;i+=1)w[i]=Re(Ee(o,Z,i));return{c(){e=z("form"),t=z("button"),g.c(),l=U(),r=z("button"),M.c(),a=U(),n=z("input"),c=U(),d=z("div");for(let i=0;i<b.length;i+=1)b[i].c();q=U(),p=z("form"),y=z("label"),P=J("// hit `enter` to save your code in the URL"),W=U(),R=z("label"),ee=J("// to learn more click on the dots above or "),D=z("a"),te=J("here"),le=U();for(let i=0;i<w.length;i+=1)w[i].c();K=U(),H=z("label"),re=J("(t,i,m,b) =>"),A=U(),f=z("input"),this.h()},l(i){e=N(i,"FORM",{});var v=_(e);t=N(v,"BUTTON",{});var u=_(t);g.l(u),u.forEach(h),l=F(v),r=N(v,"BUTTON",{class:!0});var j=_(r);M.l(j),j.forEach(h),a=F(v),n=N(v,"INPUT",{type:!0,name:!0,step:!0,min:!0,max:!0,id:!0}),v.forEach(h),c=F(i),d=N(i,"DIV",{class:!0,style:!0});var de=_(d);for(let X=0;X<b.length;X+=1)b[X].l(de);de.forEach(h),q=F(i),p=N(i,"FORM",{class:!0});var I=_(p);y=N(I,"LABEL",{for:!0,class:!0});var pe=_(y);P=x(pe,"// hit `enter` to save your code in the URL"),pe.forEach(h),W=F(I),R=N(I,"LABEL",{for:!0,class:!0});var ue=_(R);ee=x(ue,"// to learn more click on the dots above or "),D=N(ue,"A",{href:!0});var ge=_(D);te=x(ge,"here"),ge.forEach(h),ue.forEach(h),le=F(I);for(let X=0;X<w.length;X+=1)w[X].l(I);K=F(I),H=N(I,"LABEL",{id:!0,for:!0,class:!0});var be=_(H);re=x(be,"(t,i,m,b) =>"),be.forEach(h),A=F(I),f=N(I,"INPUT",{id:!0,name:!0,type:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),I.forEach(h),this.h()},h(){s(r,"class","mute-button"),C(r,"active",o[0]),s(n,"type","range"),s(n,"name",""),s(n,"step","0.1"),s(n,"min","0.0"),s(n,"max","1.0"),n.disabled=o[0],s(n,"id",""),s(d,"class","container svelte-19q7hp"),oe(d,"--beats",O),oe(d,"--meausures",ae),s(y,"for","code"),s(y,"class","comment focused svelte-19q7hp"),s(D,"href",""+(ye+"/about")),s(R,"for","code"),s(R,"class","comment focused svelte-19q7hp"),s(H,"id","label"),s(H,"for","code"),s(H,"class","svelte-19q7hp"),s(f,"id","input"),s(f,"name","code"),s(f,"type","text"),s(f,"spellcheck","false"),s(f,"autocomplete","off"),s(f,"maxlength","64"),s(f,"class","svelte-19q7hp"),s(p,"class","editor svelte-19q7hp")},m(i,v){k(i,e,v),m(e,t),g.m(t,null),m(e,l),m(e,r),M.m(r,null),m(e,a),m(e,n),he(n,o[1]),k(i,c,v),k(i,d,v);for(let u=0;u<b.length;u+=1)b[u].m(d,null);k(i,q,v),k(i,p,v),m(p,y),m(y,P),m(p,W),m(p,R),m(R,ee),m(R,D),m(D,te),m(p,le);for(let u=0;u<w.length;u+=1)w[u].m(p,null);m(p,K),m(p,H),m(H,re),m(p,A),m(p,f),he(f,o[3]),T||(Y=[Q(t,"click",me(o[12])),Q(r,"click",me(o[13])),Q(n,"change",o[14]),Q(n,"input",o[14]),Q(d,"click",o[15]),Q(f,"input",o[16]),Q(p,"submit",me(o[17]))],T=!0)},p(i,v){if(B!==(B=ne(i))&&(g.d(1),g=B(i),g&&(g.c(),g.m(t,null))),G!==(G=E(i))&&(M.d(1),M=G(i),M&&(M.c(),M.m(r,null))),v[0]&1&&C(r,"active",i[0]),v[0]&1&&(n.disabled=i[0]),v[0]&2&&he(n,i[1]),v[0]&2672){V={length:ae};let u;for(u=0;u<V.length;u+=1){const j=ze(i,V,u);b[u]?b[u].p(j,v):(b[u]=qe(j),b[u].c(),b[u].m(d,null))}for(;u<b.length;u+=1)b[u].d(1);b.length=V.length}if(v[0]&256){Z=i[8];let u;for(u=0;u<Z.length;u+=1){const j=Ee(i,Z,u);w[u]?w[u].p(j,v):(w[u]=Re(j),w[u].c(),w[u].m(p,K))}for(;u<w.length;u+=1)w[u].d(1);w.length=Z.length}v[0]&8&&f.value!==i[3]&&he(f,i[3])},i:fe,o:fe,d(i){i&&h(e),g.d(),M.d(),i&&h(c),i&&h(d),ce(b,i),i&&h(q),i&&h(p),ce(w,i),T=!1,Ve(Y)}}}const _e=1e4,O=8,ae=8;function He(o,e,t){return Math.min(Math.max(o,e),t)}const xe=(o,e)=>e-o;function $e(o,e,t){let l=0,r=0,a=0,n=!1,c=!1,d=.2;Ue(()=>{R(),window.f=(B,g)=>B*1.059463**g,window.r=(B,g)=>{for(var E=null,G=[],M=0;M<g;M++){var V=Math.floor(B/g*M);G.push(V===E?0:1),E=V}return G},$().volume.set({value:ve(d)});const A=new we,f=new we,T=new Fe({urls:{C3:"/click.mp3"},release:1,baseUrl:ye});f.set({oscillator:{type:"sine"},envelope:{attack:.2,decay:.5,release:1}}),f.set({detune:.1,volume:ve(.2),oscillator:{type:"square"},envelope:{attack:.05,decay:.1}}),A.connect($()),f.connect($()),T.connect($()),ke.scheduleRepeat(B=>{let g=P(B,r*O+a,r,a);Array.isArray(g)&&(g=g.splice(0,4).map(E=>Number.parseFloat(E)).filter(E=>E!==null&&!Number.isNaN(E)),g.forEach(E=>{E===0?T.triggerAttackRelease("C3","16n"):E>0?A.triggerAttackRelease(He(E,1,_e),"8n"):f.triggerAttackRelease(He(Math.abs(E),1,_e),"8n")})),t(5,r=(r+Math.floor((a+1)/O))%ae),t(6,a=(a+1)%O)},"8n");let Y=requestAnimationFrame(ne);function ne(){Y=requestAnimationFrame(ne),t(4,l=Ce())}return()=>cancelAnimationFrame(Y)});let q=0,p=se[0].comments,y=se[0].code,P;const W=()=>history.pushState(null,"",`#${encodeURIComponent(y)}`),R=()=>{location.hash&&t(3,y=decodeURIComponent(location.hash.slice(1)))},ee=(A,f)=>{const T=Math.abs(f/(ae*O));return A===0?1.25-.75*Oe(T):Pe(1-Math.abs(A/_e))*(1-T/2)},D=async()=>{await De(),console.log("audio is ready"),t(7,n=ke.toggle().state==="started")},te=()=>t(0,c=!c);function le(){d=je(this.value),t(1,d)}const K=()=>t(2,q=(q+1)%se.length);function H(){y=this.value,t(3,y),t(2,q)}const re=()=>{W()};return o.$$.update=()=>{var A,f,T;if(o.$$.dirty[0]&1&&($().mute=c),o.$$.dirty[0]&2&&((f=(A=$())==null?void 0:A.volume)==null||f.rampTo(ve(d),.05)),o.$$.dirty[0]&4&&(t(3,y=se[q].code),t(8,p=(T=se[q].comments)!=null?T:[])),o.$$.dirty[0]&8)try{t(9,P=new Function("t","i","m","b",`
			try { 
        with (Math)
          return [${y}].flat()
			} catch(error){
				return [0];
			}`))}catch{t(9,P=()=>[0])}},[c,d,q,y,l,r,a,n,p,P,W,ee,D,te,le,K,H,re]}class lt extends Be{constructor(e){super();Ie(this,e,$e,Je,Se,{},null,[-1,-1])}}export{lt as default};
