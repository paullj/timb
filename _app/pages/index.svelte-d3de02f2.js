import{L as ze,S as Qe,i as Xe,s as Ge,l as Le,g as U,e as w,k as O,c as E,a as M,m as D,d as f,b as p,M as P,G as h,f as ie,N as be,t as A,h as S,j as ge,O as Te,P as J,Q as ue,K as Ae,R as He,T as Ke,v as We,U as le,V as ve,W as Se,X as qe,Y as Ye,Z as Ze,_ as _e,$ as Je,a0 as xe,a1 as $e}from"../chunks/vendor-27084509.js";import{b as Fe}from"../chunks/paths-4b3c6e7e.js";const he=[{comments:["timb(re) - musical creative coding","click play and then on the dots above to hear more!"],code:"[[0,4,7,9].map(n=>f(220,n))[m%2+b%3],-110*(1+m%2),r(5,8)[b]-1]"},{comments:["each dot is a beat, to play a note","return a frequency from 1 to 10000 hz"],code:"440"},{comments:["frequencies greater than 0 use a sine wave","while negative frequencies use a square wave"],code:"-440"},{comments:["return 0 for a kick drum","infinity for hi hats and negative infinity for snare"],code:"0"},{comments:["`m` is the current measure (0-7)","and `b`, the beat in the current mesasure (0-7)"],code:"(1 + m % 2) * 110 * [1, 2, 3, 4][b % 4]"},{comments:["`t` is for time","and `i` is index (0-63)"],code:"20 * (t % 100) * [1, 2, 3, 2][i % 4]"},{comments:["NaN, undefined and other non number values are rest notes","this allows for coding intesting rhythms"],code:"440 * [2, 1, NaN, 1][i % 4]"},{comments:["returning an array plays all frequencies as a chord","you can play a maximum of 4 notes at the same time"],code:"[[261.63, 329.628, 391.995], NaN][b % 4]"},{comments:["`f(b,i)` gives you `i` semitones from base frequency `b`","this is useful for making western tonal music (440Hz is a4)"],code:"[0, 3, 5, 7].map(n => f(440, n))[b % 4]"},{comments:["`r(o,p)` gives euclidean rhythm patterns as arrays of 1s & 0s","it spreads out `o` onsets across `p` pulses`"],code:"[NaN, 0][r(3, 8)[b]]"},{comments:["no need for `Math.`, math functions are available in scope","this gives you more room for creativity"],code:"110 * sin(t) + 220 * cos(2 * t)"},{comments:["here is my attempt at twinkle twinkle little star","can you make it nicer/smaller/better?"],code:"[...'0077997~5544220~7755442~7755442'].map(n=>f(440,n))[i%32]"},{comments:["you are limited to 64 bytes, use creative ways to shorten","eg. `b^0` is equivalent to `b!=0`, every byte counts!"],code:"b^0?440:-220"},{comments:[" more examples:","a nice chord progression in c major"],code:"[0,5,7,2].map(n=>[0,16,7,12].map(x=>f(131,n+x)))[[1][i%2]*m%4]"},{comments:["how about some drums?","`1/0` is equal to infinity, useful for hi-hats and snares"],code:"[[,0][r(2+m%2,8)[b]],[-1/0][(b+2)%4],1/0,-10*(4+m%2)]"},{comments:["you can use random to add probability to you music","combine it with logic operators to add variation to beats"],code:"[(b%4^0&&random()>.1)*-90,-(m%3+1)*30*[1,2,3][b%3],[360][b%5]]"},{comments:["now its your turn","have fun!"],code:"'*your next masterpiece*'"}],et=()=>{const l=ze("__svelte__");return{page:{subscribe:l.page.subscribe},navigating:{subscribe:l.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:l.navigating.subscribe}},session:l.session}},tt={subscribe(l){return et().page.subscribe(l)}};function Ue(l,t,e){const s=l.slice();return s[26]=t[e],s}function Pe(l,t,e){const s=l.slice();return s[29]=t[e],s[31]=e,s}function Be(l,t,e){const s=l.slice();s[29]=t[e],s[35]=t,s[36]=e;const o=s[7]*Q+s[8];s[32]=o;const r=s[31]*Q+s[36];s[33]=r;const a=s[12](s[6]+(s[32]-s[33])*.25,s[33],s[31],s[36]).sort(l[20]);return s[34]=a,s}function Ce(l,t,e){const s=l.slice();s[29]=t[e],s[39]=e;const o=s[34][s[39]];return s[37]=o,s}function st(l){let t;return{c(){t=A("play")},l(e){t=S(e,"play")},m(e,s){U(e,t,s)},d(e){e&&f(t)}}}function lt(l){let t;return{c(){t=A("pause")},l(e){t=S(e,"pause")},m(e,s){U(e,t,s)},d(e){e&&f(t)}}}function Oe(l){let t;return{c(){t=w("div"),this.h()},l(e){t=E(e,"DIV",{class:!0}),M(t).forEach(f),this.h()},h(){p(t,"class","note rest svelte-1lhxo4p")},m(e,s){U(e,t,s)},d(e){e&&f(t)}}}function De(l){let t;return{c(){t=w("div"),this.h()},l(e){t=E(e,"DIV",{class:!0,style:!0}),M(t).forEach(f),this.h()},h(){p(t,"class","note svelte-1lhxo4p"),ie(t,"--index",l[39]),ie(t,"--scale",l[14](l[34][l[39]],l[32]-l[33])),P(t,"overlay",l[39]>0),P(t,"drum",l[15](l[37])),P(t,"square",l[37]<0&&!l[15](l[37]))},m(e,s){U(e,t,s)},p(e,s){s[0]&4544&&ie(t,"--scale",e[14](e[34][e[39]],e[32]-e[33])),s[0]&37312&&P(t,"drum",e[15](e[37])),s[0]&37312&&P(t,"square",e[37]<0&&!e[15](e[37]))},d(e){e&&f(t)}}}function Ie(l){let t,e,s={length:l[34].length||0},o=[];for(let a=0;a<s.length;a+=1)o[a]=De(Ce(l,s,a));let r=null;return s.length||(r=Oe()),{c(){t=w("div");for(let a=0;a<o.length;a+=1)o[a].c();r&&r.c(),e=O(),this.h()},l(a){t=E(a,"DIV",{class:!0});var d=M(t);for(let i=0;i<o.length;i+=1)o[i].l(d);r&&r.l(d),e=D(d),d.forEach(f),this.h()},h(){p(t,"class","beat svelte-1lhxo4p"),P(t,"indicator",l[32]===l[33])},m(a,d){U(a,t,d);for(let i=0;i<o.length;i+=1)o[i].m(t,null);r&&r.m(t,null),h(t,e)},p(a,d){if(d[0]&53696){s={length:a[34].length||0};let i;for(i=0;i<s.length;i+=1){const q=Ce(a,s,i);o[i]?o[i].p(q,d):(o[i]=De(q),o[i].c(),o[i].m(t,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length,s.length?r&&(r.d(1),r=null):r||(r=Oe(),r.c(),r.m(t,e))}d[0]&384&&P(t,"indicator",a[32]===a[33])},d(a){a&&f(t),be(o,a),r&&r.d()}}}function je(l){let t,e={length:Q},s=[];for(let o=0;o<e.length;o+=1)s[o]=Ie(Be(l,e,o));return{c(){for(let o=0;o<s.length;o+=1)s[o].c();t=Le()},l(o){for(let r=0;r<s.length;r+=1)s[r].l(o);t=Le()},m(o,r){for(let a=0;a<s.length;a+=1)s[a].m(o,r);U(o,t,r)},p(o,r){if(r[0]&53696){e={length:Q};let a;for(a=0;a<e.length;a+=1){const d=Be(o,e,a);s[a]?s[a].p(d,r):(s[a]=Ie(d),s[a].c(),s[a].m(t.parentNode,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=e.length}},d(o){be(s,o),o&&f(t)}}}function Ve(l){let t,e,s=l[26]+"",o;return{c(){t=w("label"),e=A("// "),o=A(s),this.h()},l(r){t=E(r,"LABEL",{for:!0,class:!0});var a=M(t);e=S(a,"// "),o=S(a,s),a.forEach(f),this.h()},h(){p(t,"for","code"),p(t,"class","comment svelte-1lhxo4p")},m(r,a){U(r,t,a),h(t,e),h(t,o)},p(r,a){a[0]&2048&&s!==(s=r[26]+"")&&ge(o,s)},d(r){r&&f(t)}}}function ot(l){let t,e,s,o,r,a,d,i,q=(l[1]?"unmute":"mute")+"",I,X,g,x,R=l[5].toFixed(2)+"",G,oe,$,L,ee,_,j,ae,ne,B,re,H,ce,u,v,y,F,T,b,K,W;function V(n,m){return n[10]?lt:st}let fe=V(l),z=fe(l),te={length:me},k=[];for(let n=0;n<te.length;n+=1)k[n]=je(Pe(l,te,n));let se=l[11],N=[];for(let n=0;n<se.length;n+=1)N[n]=Ve(Ue(l,se,n));return{c(){t=w("form"),e=w("button"),z.c(),s=O(),o=w("button"),r=A("stop"),d=O(),i=w("button"),I=A(q),X=O(),g=w("button"),x=A("volume ("),G=A(R),oe=A(")"),$=O(),L=w("div");for(let n=0;n<k.length;n+=1)k[n].c();ee=O(),_=w("form"),j=w("label"),ae=A("// hit `enter` to save your code in the URL"),ne=O(),B=w("label"),re=A("// to learn more click on the dots above or "),H=w("a"),ce=A("here"),u=O();for(let n=0;n<N.length;n+=1)N[n].c();v=O(),y=w("label"),F=A("(t,i,m,b) =>"),T=O(),b=w("input"),this.h()},l(n){t=E(n,"FORM",{class:!0});var m=M(t);e=E(m,"BUTTON",{});var c=M(e);z.l(c),c.forEach(f),s=D(m),o=E(m,"BUTTON",{});var Y=M(o);r=S(Y,"stop"),Y.forEach(f),d=D(m),i=E(m,"BUTTON",{class:!0});var Ne=M(i);I=S(Ne,q),Ne.forEach(f),X=D(m),g=E(m,"BUTTON",{class:!0});var de=M(g);x=S(de,"volume ("),G=S(de,R),oe=S(de,")"),de.forEach(f),m.forEach(f),$=D(n),L=E(n,"DIV",{class:!0,style:!0});var we=M(L);for(let Z=0;Z<k.length;Z+=1)k[Z].l(we);we.forEach(f),ee=D(n),_=E(n,"FORM",{class:!0});var C=M(_);j=E(C,"LABEL",{for:!0,class:!0});var Ee=M(j);ae=S(Ee,"// hit `enter` to save your code in the URL"),Ee.forEach(f),ne=D(C),B=E(C,"LABEL",{for:!0,class:!0});var pe=M(B);re=S(pe,"// to learn more click on the dots above or "),H=E(pe,"A",{href:!0});var Me=M(H);ce=S(Me,"here"),Me.forEach(f),pe.forEach(f),u=D(C);for(let Z=0;Z<N.length;Z+=1)N[Z].l(C);v=D(C),y=E(C,"LABEL",{id:!0,for:!0});var Re=M(y);F=S(Re,"(t,i,m,b) =>"),Re.forEach(f),T=D(C),b=E(C,"INPUT",{id:!0,name:!0,type:!0,spellcheck:!0,autocomplete:!0,maxlength:!0}),C.forEach(f),this.h()},h(){o.disabled=a=l[7]+l[8]===0&&!l[10],p(i,"class","mute-button"),P(i,"active",l[1]),p(g,"class","mute-button"),g.disabled=l[1],P(g,"active",l[1]),p(t,"class","controls svelte-1lhxo4p"),p(L,"class","container svelte-1lhxo4p"),ie(L,"--beats",Q),ie(L,"--meausures",me),p(j,"for","code"),p(j,"class","comment focus-only svelte-1lhxo4p"),p(H,"href",""+(Fe+"/about")),p(B,"for","code"),p(B,"class","comment focus-only svelte-1lhxo4p"),p(y,"id","label"),p(y,"for","code"),p(b,"id","input"),p(b,"name","code"),p(b,"type","text"),p(b,"spellcheck","false"),p(b,"autocomplete","off"),p(b,"maxlength","64"),p(_,"class","editor svelte-1lhxo4p")},m(n,m){U(n,t,m),h(t,e),z.m(e,null),h(t,s),h(t,o),h(o,r),h(t,d),h(t,i),h(i,I),h(t,X),h(t,g),h(g,x),h(g,G),h(g,oe),U(n,$,m),U(n,L,m);for(let c=0;c<k.length;c+=1)k[c].m(L,null);U(n,ee,m),U(n,_,m),h(_,j),h(j,ae),h(_,ne),h(_,B),h(B,re),h(B,H),h(H,ce),h(_,u);for(let c=0;c<N.length;c+=1)N[c].m(_,null);h(_,v),h(_,y),h(y,F),h(_,T),h(_,b),Te(b,l[4]),K||(W=[J(e,"click",ue(l[16])),J(o,"click",ue(l[17])),J(i,"click",ue(l[18])),J(g,"click",ue(l[19])),J(L,"click",l[21]),J(b,"input",l[22]),J(_,"submit",ue(l[13]))],K=!0)},p(n,m){if(fe!==(fe=V(n))&&(z.d(1),z=fe(n),z&&(z.c(),z.m(e,null))),m[0]&1408&&a!==(a=n[7]+n[8]===0&&!n[10])&&(o.disabled=a),m[0]&2&&q!==(q=(n[1]?"unmute":"mute")+"")&&ge(I,q),m[0]&2&&P(i,"active",n[1]),m[0]&32&&R!==(R=n[5].toFixed(2)+"")&&ge(G,R),m[0]&2&&(g.disabled=n[1]),m[0]&2&&P(g,"active",n[1]),m[0]&53696){te={length:me};let c;for(c=0;c<te.length;c+=1){const Y=Pe(n,te,c);k[c]?k[c].p(Y,m):(k[c]=je(Y),k[c].c(),k[c].m(L,null))}for(;c<k.length;c+=1)k[c].d(1);k.length=te.length}if(m[0]&2048){se=n[11];let c;for(c=0;c<se.length;c+=1){const Y=Ue(n,se,c);N[c]?N[c].p(Y,m):(N[c]=Ve(Y),N[c].c(),N[c].m(_,v))}for(;c<N.length;c+=1)N[c].d(1);N.length=se.length}m[0]&16&&b.value!==n[4]&&Te(b,n[4])},i:Ae,o:Ae,d(n){n&&f(t),z.d(),n&&f($),n&&f(L),be(k,n),n&&f(ee),n&&f(_),be(N,n),K=!1,He(W)}}}const ye=1e4;let Q=8,me=8;function ke(l,t,e){return Math.min(Math.max(l,t),e)}function at(l,t,e){let s,o;Ke(l,tt,u=>e(23,o=u));let r=0,a=0,d=0,i=!1,q=!1,I=!1,X=0;We(()=>{$(),window.f=(F,T)=>F*1.059463**T,window.r=(F,T)=>{for(var b=null,K=[],W=0;W<T;W++){var V=Math.floor(F/T*W);K.push(V===b?0:1),b=V}return K},le().volume.set({value:ve(s)});const u=new qe,v=new qe,y=new Ye({urls:{C3:"/kick.mp3",C4:"/snare.mp3",C5:"/hat.mp3"},baseUrl:Fe});v.set({oscillator:{type:"sine"},envelope:{attack:.2,decay:.5,release:1}}),v.set({detune:.1,volume:ve(.2),oscillator:{type:"square"},envelope:{attack:.05,decay:.1}}),u.connect(le()),v.connect(le()),y.connect(le()),e(6,r=Ze()),_e.scheduleRepeat(F=>{e(6,r=F);let T=G(F,a*Q+d,a,d);Array.isArray(T)&&T.forEach(b=>{_(b)?b>0?y.triggerAttackRelease("C5","16n"):b<0?y.triggerAttackRelease("C4","16n"):y.triggerAttackRelease("C3","16n"):b>0?u.triggerAttackRelease(ke(b,1,ye),"8n"):v.triggerAttackRelease(ke(Math.abs(b),1,ye),"8n")}),e(7,a=(a+Math.floor((d+1)/Q))%me),e(8,d=(d+1)%Q)},"8n")});let g=0,x=he[0].comments,R=he[0].code,G;const oe=()=>{let u=new URLSearchParams(o.url.searchParams.toString());u.set("code",R),history.pushState(null,"",`?${u.toString()}`)},$=()=>{o.url.searchParams.has("code")&&e(4,R=o.url.searchParams.get("code")),o.url.searchParams.has("bpm")&&e(0,_e.bpm.value=ke(o.url.searchParams.get("bpm"),1,500),Se)},L=(u,v)=>{const y=Math.abs(v/(me*Q));return _(u)?(2-Je(y)**2)/1.75*(u===0?1:u>0?.5:.8):xe(1-Math.abs(u/ye))*(1-y/2)},ee=u=>Number.isNaN(u)||u==null,_=u=>u===0||!Number.isFinite(u),j=async()=>{i||(await $e(),e(9,i=!0),console.log("Audio is ready!")),e(10,q=_e.toggle().state==="started")},ae=()=>{_e.stop(),e(10,q=!1),e(7,a=e(8,d=0))},ne=()=>e(1,I=!I),B=()=>e(2,X=(X+1)%4),re=(u,v)=>(_(u)&&(u=0),_(v)&&(v=0),v-u),H=()=>e(3,g=Math.min(g+1,he.length-1));function ce(){R=this.value,e(4,R),e(3,g)}return l.$$.update=()=>{var u,v,y;l.$$.dirty[0]&4&&e(5,s=(X+1)/4),l.$$.dirty[0]&3&&(le().mute=I),l.$$.dirty[0]&33&&((v=(u=le())==null?void 0:u.volume)==null||v.rampTo(ve(s))),l.$$.dirty[0]&8&&(e(4,R=he[g].code),e(11,x=(y=he[g].comments)!=null?y:[])),l.$$.dirty[0]&16&&e(12,G=(F,T,b,K)=>{try{return new Function("t","i","m","b",`
          try { 
            with (Math)
              return [${R}];
          } catch(error){
            return [NaN];
          }`)(F,T,b,K).flat().splice(0,4).map(V=>Number.parseFloat(V)).filter(V=>!ee(V))}catch{return[NaN]}})},[Se,I,X,g,R,s,r,a,d,i,q,x,G,oe,L,_,j,ae,ne,B,re,H,ce]}class ct extends Qe{constructor(t){super();Xe(this,t,at,ot,Ge,{},null,[-1,-1])}}export{ct as default};
