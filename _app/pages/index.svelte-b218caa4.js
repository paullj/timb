import{S as Ie,i as Le,s as Se,l as ae,g as k,e as E,k as V,c as z,a as v,m as U,d as h,b as n,N as q,I as m,O as ce,t as Z,h as J,j as Ve,f as ne,P as ie,Q as x,R as fe,M as ve,T as Ue,v as qe,U as $,V as _e,W as we,X as Fe,Y as ke,Z as Ce,_ as Oe,$ as Pe,G as I,H as L,a0 as ye}from"../chunks/vendor-be97d11c.js";const oe=[{comments:["timb(re) - musical creative coding","click play and then on the dots above to hear more!"],code:"[[0,4,7,9].map(n=>f(220,n))[m%2+b%3],-[55,69][r(1,5)[i%5]]]"},{comments:["each dot is a beat, to play a note","return a frequency from 1 to 20000 hz"],code:"440"},{comments:["frequencies > 0 use a sine wave","while negative frequencies use a square wave"],code:"-440"},{comments:["return 0 for a click","this can be useful for drum rhythms"],code:"0"},{comments:["`m` is the current measure (0-7)","and `b`, the beat in the current mesasure (0-7)"],code:"(1+m%2)*110*[1,2,3,4][b%4]"},{comments:["`t` is for time","and `i` is index (0-63)"],code:"440+t*[0,1,2,1][i%4]"},{comments:["NaN and other non number values are rest notes","this allows for intesting rhythms"],code:"440*[2,1,1,NaN,1,1,NaN,1][i%8]"},{comments:["returning an array plays all frequencies as a chord","you can play a maximum of 4 notes at the same time"],code:"[[440,220,110],[220,110,880]][m%2]"},{comments:["`f(b,i)` gives you `i` semitones from base frequency `b`","nb. 440Hz is a4. MAKE THIS A BETTER MSG"],code:"[0,3,5,7].map(n=>f(440,n))[b%4]"},{comments:["`r(o,t)` gives indexes for euclidean rhythm patterns","EXPLAIN THIS BETTER goto /about for more"],code:"[NaN,0][r(3,8)[b]]"},{comments:["`Math` functions are available in scope","more room for creativity WRITE SOMETHING INTERESTING"],code:"440+110*sin(t)+220*cos(2*t)"},{comments:["an attempt at twinkle twinkle little star","can you make it nicer/smaller/better?"],code:"[...'0077997~5544220~7755442~7755442~'].map(n=>f(440,n))[i%32]"},{comments:["now its your turn","remember that you are limited to 64 bytes"],code:"'HAVE FUN :)'"}];function Ee(o,e,t){const l=o.slice();return l[18]=e[t],l}function ze(o,e,t){const l=o.slice();return l[21]=e[t],l[23]=t,l}function Me(o,e,t){const l=o.slice();l[21]=e[t],l[28]=t;const r=l[5]*j+l[6];l[24]=r;const a=l[23]*j+l[28];l[25]=a;const s=l[9](l[4],l[25],l[23],l[28]).sort(Ye);return l[26]=s,l}function Ne(o,e,t){const l=o.slice();return l[21]=e[t],l[30]=t,l}function De(o){let e,t;return{c(){e=I("svg"),t=I("path"),this.h()},l(l){e=L(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var r=v(e);t=L(r,"path",{d:!0,stroke:!0,"stroke-linejoin":!0}),v(t).forEach(h),r.forEach(h),this.h()},h(){n(t,"d","M4.5 12.5v-10l7 5-7 5z"),n(t,"stroke","currentColor"),n(t,"stroke-linejoin","round"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-l84rgu")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function je(o){let e,t;return{c(){e=I("svg"),t=I("path"),this.h()},l(l){e=L(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var r=v(e);t=L(r,"path",{d:!0,stroke:!0}),v(t).forEach(h),r.forEach(h),this.h()},h(){n(t,"d","M5.5 3v9m4-9v9"),n(t,"stroke","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-l84rgu")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Ge(o){let e,t;return{c(){e=I("svg"),t=I("path"),this.h()},l(l){e=L(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var r=v(e);t=L(r,"path",{d:!0,fill:!0}),v(t).forEach(h),r.forEach(h),this.h()},h(){n(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1z"),n(t,"fill","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-l84rgu")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Xe(o){let e,t;return{c(){e=I("svg"),t=I("path"),this.h()},l(l){e=L(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var r=v(e);t=L(r,"path",{d:!0,fill:!0}),v(t).forEach(h),r.forEach(h),this.h()},h(){n(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1zm2-2v7h1V4h-1z"),n(t,"fill","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-l84rgu")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function xe(o){let e,t;return{c(){e=I("svg"),t=I("path"),this.h()},l(l){e=L(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var r=v(e);t=L(r,"path",{d:!0,fill:!0}),v(t).forEach(h),r.forEach(h),this.h()},h(){n(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1zm2-2v7h1V4h-1zm2-2v11h1V2h-1z"),n(t,"fill","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-l84rgu")},m(l,r){k(l,e,r),m(e,t)},d(l){l&&h(e)}}}function Qe(o){let e;return{c(){e=E("div"),this.h()},l(t){e=z(t,"DIV",{class:!0,style:!0}),v(e).forEach(h),this.h()},h(){n(e,"class","note svelte-l84rgu"),ne(e,"--index",o[30]),ne(e,"--scale",ye(Math.abs(1-o[26][o[30]]/he))),q(e,"overlay",o[30]>0),q(e,"click",o[26][o[30]]===0),q(e,"triangle",o[26][o[30]]<0)},m(t,l){k(t,e,l)},p(t,l){l&528&&ne(e,"--scale",ye(Math.abs(1-t[26][t[30]]/he))),l&528&&q(e,"click",t[26][t[30]]===0),l&528&&q(e,"triangle",t[26][t[30]]<0)},d(t){t&&h(e)}}}function We(o){let e;return{c(){e=E("div"),this.h()},l(t){e=z(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){n(e,"class","note rest svelte-l84rgu")},m(t,l){k(t,e,l)},p:ve,d(t){t&&h(e)}}}function Ae(o){let e,t;function l(s,i){return i&528&&(e=null),e==null&&(e=!!(s[26][s[30]]===null||Number.isNaN(s[26][s[30]]))),e?We:Qe}let r=l(o,-1),a=r(o);return{c(){a.c(),t=ae()},l(s){a.l(s),t=ae()},m(s,i){a.m(s,i),k(s,t,i)},p(s,i){r===(r=l(s,i))&&a?a.p(s,i):(a.d(1),a=r(s),a&&(a.c(),a.m(t.parentNode,t)))},d(s){a.d(s),s&&h(t)}}}function Te(o){let e,t,l={length:o[26].length||0},r=[];for(let a=0;a<l.length;a+=1)r[a]=Ae(Ne(o,l,a));return{c(){e=E("div");for(let a=0;a<r.length;a+=1)r[a].c();t=V(),this.h()},l(a){e=z(a,"DIV",{class:!0});var s=v(e);for(let i=0;i<r.length;i+=1)r[i].l(s);t=U(s),s.forEach(h),this.h()},h(){n(e,"class","beat svelte-l84rgu"),q(e,"indicator",o[24]===o[25])},m(a,s){k(a,e,s);for(let i=0;i<r.length;i+=1)r[i].m(e,null);m(e,t)},p(a,s){if(s&528){l={length:a[26].length||0};let i;for(i=0;i<l.length;i+=1){const d=Ne(a,l,i);r[i]?r[i].p(d,s):(r[i]=Ae(d),r[i].c(),r[i].m(e,t))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}s&96&&q(e,"indicator",a[24]===a[25])},d(a){a&&h(e),ce(r,a)}}}function Re(o){let e,t={length:j},l=[];for(let r=0;r<t.length;r+=1)l[r]=Te(Me(o,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ae()},l(r){for(let a=0;a<l.length;a+=1)l[a].l(r);e=ae()},m(r,a){for(let s=0;s<l.length;s+=1)l[s].m(r,a);k(r,e,a)},p(r,a){if(a&624){t={length:j};let s;for(s=0;s<t.length;s+=1){const i=Me(r,t,s);l[s]?l[s].p(i,a):(l[s]=Te(i),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(r){ce(l,r),r&&h(e)}}}function He(o){let e,t,l=o[18]+"",r;return{c(){e=E("label"),t=Z("// "),r=Z(l),this.h()},l(a){e=z(a,"LABEL",{for:!0,class:!0});var s=v(e);t=J(s,"// "),r=J(s,l),s.forEach(h),this.h()},h(){n(e,"for","code"),n(e,"class","comment svelte-l84rgu")},m(a,s){k(a,e,s),m(e,t),m(e,r)},p(a,s){s&256&&l!==(l=a[18]+"")&&Ve(r,l)},d(a){a&&h(e)}}}function Ke(o){let e,t,l,r,a,s,i,d,A,g,y,F,Q,R,ee,C,te,le,W,H,S,T,p,G,re;function O(c,f){return c[7]?je:De}let M=O(o),_=M(o);function se(c,f){return c[1]>=.65?xe:c[1]>=.35?Xe:Ge}let P=se(o),N=P(o),K={length:ue},b=[];for(let c=0;c<K.length;c+=1)b[c]=Re(ze(o,K,c));let Y=o[8],w=[];for(let c=0;c<Y.length;c+=1)w[c]=He(Ee(o,Y,c));return{c(){e=E("form"),t=E("button"),_.c(),l=V(),r=E("button"),N.c(),a=V(),s=E("input"),i=V(),d=E("div");for(let c=0;c<b.length;c+=1)b[c].c();A=V(),g=E("form"),y=E("label"),F=Z("// hit `enter` to save your code in the URL"),Q=V(),R=E("label"),ee=Z("// to learn more click on the dots above or "),C=E("a"),te=Z("here"),le=V();for(let c=0;c<w.length;c+=1)w[c].c();W=V(),H=E("label"),S=Z("(t,i,m,b) =>"),T=V(),p=E("input"),this.h()},l(c){e=z(c,"FORM",{});var f=v(e);t=z(f,"BUTTON",{class:!0});var u=v(t);_.l(u),u.forEach(h),l=U(f),r=z(f,"BUTTON",{class:!0});var D=v(r);N.l(D),D.forEach(h),a=U(f),s=z(f,"INPUT",{type:!0,name:!0,step:!0,min:!0,max:!0,id:!0}),f.forEach(h),i=U(c),d=z(c,"DIV",{class:!0,style:!0});var de=v(d);for(let X=0;X<b.length;X+=1)b[X].l(de);de.forEach(h),A=U(c),g=z(c,"FORM",{class:!0});var B=v(g);y=z(B,"LABEL",{for:!0,class:!0});var ge=v(y);F=J(ge,"// hit `enter` to save your code in the URL"),ge.forEach(h),Q=U(B),R=z(B,"LABEL",{for:!0,class:!0});var me=v(R);ee=J(me,"// to learn more click on the dots above or "),C=z(me,"A",{href:!0});var pe=v(C);te=J(pe,"here"),pe.forEach(h),me.forEach(h),le=U(B);for(let X=0;X<w.length;X+=1)w[X].l(B);W=U(B),H=z(B,"LABEL",{id:!0,for:!0,class:!0});var be=v(H);S=J(be,"(t,i,m,b) =>"),be.forEach(h),T=U(B),p=z(B,"INPUT",{id:!0,name:!0,type:!0,spellcheck:!0,autocomplete:!0,maxlength:!0,class:!0}),B.forEach(h),this.h()},h(){n(t,"class","svelte-l84rgu"),n(r,"class","mute-button svelte-l84rgu"),q(r,"active",o[0]),n(s,"type","range"),n(s,"name",""),n(s,"step","0.1"),n(s,"min","0.0"),n(s,"max","1.0"),s.disabled=o[0],n(s,"id",""),n(d,"class","container svelte-l84rgu"),ne(d,"--beats",j),ne(d,"--meausures",ue),n(y,"for","code"),n(y,"class","comment focused svelte-l84rgu"),n(C,"href","/about"),n(R,"for","code"),n(R,"class","comment focused svelte-l84rgu"),n(H,"id","label"),n(H,"for","code"),n(H,"class","svelte-l84rgu"),n(p,"id","input"),n(p,"name","code"),n(p,"type","text"),n(p,"spellcheck","false"),n(p,"autocomplete","off"),n(p,"maxlength","64"),n(p,"class","svelte-l84rgu"),n(g,"class","editor svelte-l84rgu")},m(c,f){k(c,e,f),m(e,t),_.m(t,null),m(e,l),m(e,r),N.m(r,null),m(e,a),m(e,s),ie(s,o[1]),k(c,i,f),k(c,d,f);for(let u=0;u<b.length;u+=1)b[u].m(d,null);k(c,A,f),k(c,g,f),m(g,y),m(y,F),m(g,Q),m(g,R),m(R,ee),m(R,C),m(C,te),m(g,le);for(let u=0;u<w.length;u+=1)w[u].m(g,null);m(g,W),m(g,H),m(H,S),m(g,T),m(g,p),ie(p,o[3]),G||(re=[x(t,"click",fe(o[11])),x(r,"click",fe(o[12])),x(s,"change",o[13]),x(s,"input",o[13]),x(d,"click",o[14]),x(p,"input",o[15]),x(g,"submit",fe(o[16]))],G=!0)},p(c,[f]){if(M!==(M=O(c))&&(_.d(1),_=M(c),_&&(_.c(),_.m(t,null))),P!==(P=se(c))&&(N.d(1),N=P(c),N&&(N.c(),N.m(r,null))),f&1&&q(r,"active",c[0]),f&1&&(s.disabled=c[0]),f&2&&ie(s,c[1]),f&624){K={length:ue};let u;for(u=0;u<K.length;u+=1){const D=ze(c,K,u);b[u]?b[u].p(D,f):(b[u]=Re(D),b[u].c(),b[u].m(d,null))}for(;u<b.length;u+=1)b[u].d(1);b.length=K.length}if(f&256){Y=c[8];let u;for(u=0;u<Y.length;u+=1){const D=Ee(c,Y,u);w[u]?w[u].p(D,f):(w[u]=He(D),w[u].c(),w[u].m(g,W))}for(;u<w.length;u+=1)w[u].d(1);w.length=Y.length}f&8&&p.value!==c[3]&&ie(p,c[3])},i:ve,o:ve,d(c){c&&h(e),_.d(),N.d(),c&&h(i),c&&h(d),ce(b,c),c&&h(A),c&&h(g),ce(w,c),G=!1,Ue(re)}}}const he=2e4,j=8,ue=8;function Be(o,e,t){return Math.min(Math.max(o,e),t)}const Ye=(o,e)=>e-o;function Ze(o,e,t){let l=0,r=0,a=0,s=!1,i=!1,d=.2;qe(()=>{R(),window.f=(O,M)=>O*1.059463**M,window.r=(O,M)=>{for(var _=null,se=[],P=0;P<M;P++){var N=Math.floor(O/M*P);se.push(N===_?0:1),_=N}return se},$().volume.set({value:_e(d)});const S=new we,T=new we,p=new Fe({urls:{C3:"click.mp3"},release:1});T.set({oscillator:{type:"sine"},envelope:{attack:.2,decay:.5,release:1}}),T.set({detune:.1,volume:_e(.2),oscillator:{type:"square"},envelope:{attack:.05,decay:.1}}),S.connect($()),T.connect($()),p.connect($()),ke.scheduleRepeat(O=>{let M=F(O,r*j+a,r,a);Array.isArray(M)&&(M=M.splice(0,4).map(_=>Number.parseFloat(_)).filter(_=>_!==null&&!Number.isNaN(_)),M.forEach(_=>{_===0?p.triggerAttackRelease("C3","16n"):_>0?S.triggerAttackRelease(Be(_,1,he),"8n"):T.triggerAttackRelease(Be(Math.abs(_),1,he),"8n")})),t(5,r=(r+Math.floor((a+1)/j))%ue),t(6,a=(a+1)%j)},"8n");let G=requestAnimationFrame(re);function re(){G=requestAnimationFrame(re),t(4,l=Ce())}return()=>cancelAnimationFrame(G)});let A=0,g=oe[0].comments,y=oe[0].code,F;const Q=()=>history.pushState(null,"",`#${encodeURIComponent(y)}`),R=()=>{location.hash&&t(3,y=decodeURIComponent(location.hash.slice(1)))},ee=async()=>{await Oe(),console.log("audio is ready"),t(7,s=ke.toggle().state==="started")},C=()=>t(0,i=!i);function te(){d=Pe(this.value),t(1,d)}const le=()=>t(2,A=(A+1)%oe.length);function W(){y=this.value,t(3,y),t(2,A)}const H=()=>{Q()};return o.$$.update=()=>{var S,T,p;if(o.$$.dirty&1&&($().mute=i),o.$$.dirty&2&&((T=(S=$())==null?void 0:S.volume)==null||T.rampTo(_e(d),.05)),o.$$.dirty&4&&(t(3,y=oe[A].code),t(8,g=(p=oe[A].comments)!=null?p:[])),o.$$.dirty&8)try{t(9,F=new Function("t","i","m","b",`
			try { 
        with (Math)
          return [${y}].flat()
			} catch(error){
				return [0];
			}`))}catch{t(9,F=()=>[0])}},[i,d,A,y,l,r,a,s,g,F,Q,ee,C,te,le,W,H]}class $e extends Ie{constructor(e){super();Le(this,e,Ze,Ke,Se,{})}}export{$e as default};
