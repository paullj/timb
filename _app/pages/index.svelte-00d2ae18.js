import{L as je,S as ze,i as Qe,s as Xe,l as fe,g as R,e as k,k as I,c as N,a as E,m as D,d as u,b as f,M as F,G as h,N as _e,t as S,h as q,j as pe,f as re,O as Se,P as W,Q as ce,K as ge,R as Ge,T as He,v as Ke,U as le,V as ve,W as qe,X as Ae,Y as We,Z as Ye,_ as be,$ as Ze,a0 as Je,a1 as xe}from"../chunks/vendor-27084509.js";import{b as Ue}from"../chunks/paths-4b3c6e7e.js";const ie=[{comments:["timb(re) - musical creative coding","click play and then on the dots above to hear more!"],code:"[[0,4,7,9].map(n=>f(220,n))[m%2+b%3],-110*(1+m%2),r(5,8)[b]-1]"},{comments:["each dot is a beat, to play a note","return a frequency from 1 to 10000 hz"],code:"440"},{comments:["frequencies greater than 0 use a sine wave","while negative frequencies use a square wave"],code:"-440"},{comments:["return 0 for a click","this can be useful for drum rhythms"],code:"0"},{comments:["`m` is the current measure (0-7)","and `b`, the beat in the current mesasure (0-7)"],code:"(1 + m % 2) * 110 * [1, 2, 3, 4][b % 4]"},{comments:["`t` is for time","and `i` is index (0-63)"],code:"20 * (t % 100) * [0, 1, 2, 1][i % 4]"},{comments:["NaN, undefined and other non number values are rest notes","this allows for coding intesting rhythms"],code:"440 * [2, 1, NaN, 1][i % 4]"},{comments:["returning an array plays all frequencies as a chord","you can play a maximum of 4 notes at the same time"],code:"[[261.63, 329.628, 391.995], NaN][b % 4]"},{comments:["`f(b,i)` gives you `i` semitones from base frequency `b`","this is useful for making western tonal music (440Hz is a4)"],code:"[0, 3, 5, 7].map(n => f(440, n))[b % 4]"},{comments:["`r(o,p)` gives euclidean rhythm patterns as arrays of 1s & 0s","it spreads out `o` onsets across `p` pulses`"],code:"[NaN, 0][r(3, 8)[b]]"},{comments:["no need for `Math.`, math functions are available in scope","this gives you more room for creativity"],code:"110 * sin(t) + 220 * cos(2 * t)"},{comments:["here is my attempt at twinkle twinkle little star","can you make it nicer/smaller/better?"],code:"[...'0077997~5544220~7755442~7755442'].map(n=>f(440,n))[i%32]"},{comments:["you are limited to 64 bytes, use creative ways to shorten","eg. `b^0` is equivalent to `b!=0`, every byte counts!"],code:"b^0?440:-220"},{comments:["now its your turn","have fun!"],code:"'*your next masterpiece*'"}],$e=()=>{const l=je("__svelte__");return{page:{subscribe:l.page.subscribe},navigating:{subscribe:l.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:l.navigating.subscribe}},session:l.session}},et={subscribe(l){return $e().page.subscribe(l)}};function Pe(l,t,e){const s=l.slice();return s[24]=t[e],s}function Fe(l,t,e){const s=l.slice();return s[27]=t[e],s[29]=e,s}function Be(l,t,e){const s=l.slice();s[27]=t[e],s[34]=e;const a=s[7]*X+s[8];s[30]=a;const n=s[29]*X+s[34];s[31]=n;const o=s[12](s[6]+s[31]*.25,s[31],s[29],s[34]).sort(nt);return s[32]=o,s}function Oe(l,t,e){const s=l.slice();return s[27]=t[e],s[36]=e,s}function tt(l){let t;return{c(){t=S("play")},l(e){t=q(e,"play")},m(e,s){R(e,t,s)},d(e){e&&u(t)}}}function st(l){let t;return{c(){t=S("pause")},l(e){t=q(e,"pause")},m(e,s){R(e,t,s)},d(e){e&&u(t)}}}function lt(l){let t;return{c(){t=k("div"),this.h()},l(e){t=N(e,"DIV",{class:!0}),E(t).forEach(u),this.h()},h(){f(t,"class","note rest svelte-m5ao07")},m(e,s){R(e,t,s)},p:ge,d(e){e&&u(t)}}}function ot(l){let t;return{c(){t=k("div"),this.h()},l(e){t=N(e,"DIV",{class:!0,style:!0}),E(t).forEach(u),this.h()},h(){f(t,"class","note svelte-m5ao07"),re(t,"--index",l[36]),re(t,"--scale",l[14](l[32][l[36]],l[30]-l[31])),F(t,"overlay",l[36]>0),F(t,"click",l[32][l[36]]===0),F(t,"triangle",l[32][l[36]]<0)},m(e,s){R(e,t,s)},p(e,s){s[0]&4544&&re(t,"--scale",e[14](e[32][e[36]],e[30]-e[31])),s[0]&4160&&F(t,"click",e[32][e[36]]===0),s[0]&4160&&F(t,"triangle",e[32][e[36]]<0)},d(e){e&&u(t)}}}function Ie(l){let t,e;function s(o,c){return c[0]&4160&&(t=null),t==null&&(t=o[32][o[36]]!=null&&!Number.isNaN(o[32][o[36]])),t?ot:lt}let a=s(l,[-1,-1]),n=a(l);return{c(){n.c(),e=fe()},l(o){n.l(o),e=fe()},m(o,c){n.m(o,c),R(o,e,c)},p(o,c){a===(a=s(o,c))&&n?n.p(o,c):(n.d(1),n=a(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){n.d(o),o&&u(e)}}}function De(l){let t,e,s={length:l[32].length||0},a=[];for(let n=0;n<s.length;n+=1)a[n]=Ie(Oe(l,s,n));return{c(){t=k("div");for(let n=0;n<a.length;n+=1)a[n].c();e=I(),this.h()},l(n){t=N(n,"DIV",{class:!0});var o=E(t);for(let c=0;c<a.length;c+=1)a[c].l(o);e=D(o),o.forEach(u),this.h()},h(){f(t,"class","beat svelte-m5ao07"),F(t,"indicator",l[30]===l[31])},m(n,o){R(n,t,o);for(let c=0;c<a.length;c+=1)a[c].m(t,null);h(t,e)},p(n,o){if(o[0]&20928){s={length:n[32].length||0};let c;for(c=0;c<s.length;c+=1){const g=Oe(n,s,c);a[c]?a[c].p(g,o):(a[c]=Ie(g),a[c].c(),a[c].m(t,e))}for(;c<a.length;c+=1)a[c].d(1);a.length=s.length}o[0]&384&&F(t,"indicator",n[30]===n[31])},d(n){n&&u(t),_e(a,n)}}}function Ce(l){let t,e={length:X},s=[];for(let a=0;a<e.length;a+=1)s[a]=De(Be(l,e,a));return{c(){for(let a=0;a<s.length;a+=1)s[a].c();t=fe()},l(a){for(let n=0;n<s.length;n+=1)s[n].l(a);t=fe()},m(a,n){for(let o=0;o<s.length;o+=1)s[o].m(a,n);R(a,t,n)},p(a,n){if(n[0]&20928){e={length:X};let o;for(o=0;o<e.length;o+=1){const c=Be(a,e,o);s[o]?s[o].p(c,n):(s[o]=De(c),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=e.length}},d(a){_e(s,a),a&&u(t)}}}function Ve(l){let t,e,s=l[24]+"",a;return{c(){t=k("label"),e=S("// "),a=S(s),this.h()},l(n){t=N(n,"LABEL",{for:!0,class:!0});var o=E(t);e=q(o,"// "),a=q(o,s),o.forEach(u),this.h()},h(){f(t,"for","code"),f(t,"class","comment svelte-m5ao07")},m(n,o){R(n,t,o),h(t,e),h(t,a)},p(n,o){o[0]&2048&&s!==(s=n[24]+"")&&pe(a,s)},d(n){n&&u(t)}}}function at(l){let t,e,s,a,n,o,c,g,C=(l[1]?"unmute":"mute")+"",V,G,_,Y,M=l[5].toFixed(2)+"",j,Z,J,L,x,d,z,oe,ae,B,ne,b,T,A,U,w,P,$,p,ee,Ne;function we(r,m){return r[10]?st:tt}let he=we(l),Q=he(l),te={length:ue},v=[];for(let r=0;r<te.length;r+=1)v[r]=Ce(Fe(l,te,r));let se=l[11],y=[];for(let r=0;r<se.length;r+=1)y[r]=Ve(Pe(l,se,r));return{c(){t=k("form"),e=k("button"),Q.c(),s=I(),a=k("button"),n=S("stop"),c=I(),g=k("button"),V=S(C),G=I(),_=k("button"),Y=S("volume ("),j=S(M),Z=S(")"),J=I(),L=k("div");for(let r=0;r<v.length;r+=1)v[r].c();x=I(),d=k("form"),z=k("label"),oe=S("// hit `enter` to save your code in the URL"),ae=I(),B=k("label"),ne=S("// to learn more click on the dots above or "),b=k("a"),T=S("here"),A=I();for(let r=0;r<y.length;r+=1)y[r].c();U=I(),w=k("label"),P=S("(t,i,m,b) =>"),$=I(),p=k("input"),this.h()},l(r){t=N(r,"FORM",{class:!0});var m=E(t);e=N(m,"BUTTON",{});var i=E(e);Q.l(i),i.forEach(u),s=D(m),a=N(m,"BUTTON",{});var H=E(a);n=q(H,"stop"),H.forEach(u),c=D(m),g=N(m,"BUTTON",{class:!0});var Ee=E(g);V=q(Ee,C),Ee.forEach(u),G=D(m),_=N(m,"BUTTON",{class:!0});var me=E(_);Y=q(me,"volume ("),j=q(me,M),Z=q(me,")"),me.forEach(u),m.forEach(u),J=D(r),L=N(r,"DIV",{class:!0,style:!0});var Me=E(L);for(let K=0;K<v.length;K+=1)v[K].l(Me);Me.forEach(u),x=D(r),d=N(r,"FORM",{class:!0});var O=E(d);z=N(O,"LABEL",{for:!0,class:!0});var Le=E(z);oe=q(Le,"// hit `enter` to save your code in the URL"),Le.forEach(u),ae=D(O),B=N(O,"LABEL",{for:!0,class:!0});var de=E(B);ne=q(de,"// to learn more click on the dots above or "),b=N(de,"A",{href:!0});var Te=E(b);T=q(Te,"here"),Te.forEach(u),de.forEach(u),A=D(O);for(let K=0;K<y.length;K+=1)y[K].l(O);U=D(O),w=N(O,"LABEL",{id:!0,for:!0});var Re=E(w);P=q(Re,"(t,i,m,b) =>"),Re.forEach(u),$=D(O),p=N(O,"INPUT",{id:!0,name:!0,type:!0,spellcheck:!0,autocomplete:!0,maxlength:!0}),O.forEach(u),this.h()},h(){a.disabled=o=l[7]+l[8]===0&&!l[10],f(g,"class","mute-button"),F(g,"active",l[1]),f(_,"class","mute-button"),_.disabled=l[1],F(_,"active",l[1]),f(t,"class","controls svelte-m5ao07"),f(L,"class","container svelte-m5ao07"),re(L,"--beats",X),re(L,"--meausures",ue),f(z,"for","code"),f(z,"class","comment focus-only svelte-m5ao07"),f(b,"href",""+(Ue+"/about")),f(B,"for","code"),f(B,"class","comment focus-only svelte-m5ao07"),f(w,"id","label"),f(w,"for","code"),f(p,"id","input"),f(p,"name","code"),f(p,"type","text"),f(p,"spellcheck","false"),f(p,"autocomplete","off"),f(p,"maxlength","64"),f(d,"class","editor svelte-m5ao07")},m(r,m){R(r,t,m),h(t,e),Q.m(e,null),h(t,s),h(t,a),h(a,n),h(t,c),h(t,g),h(g,V),h(t,G),h(t,_),h(_,Y),h(_,j),h(_,Z),R(r,J,m),R(r,L,m);for(let i=0;i<v.length;i+=1)v[i].m(L,null);R(r,x,m),R(r,d,m),h(d,z),h(z,oe),h(d,ae),h(d,B),h(B,ne),h(B,b),h(b,T),h(d,A);for(let i=0;i<y.length;i+=1)y[i].m(d,null);h(d,U),h(d,w),h(w,P),h(d,$),h(d,p),Se(p,l[4]),ee||(Ne=[W(e,"click",ce(l[15])),W(a,"click",ce(l[16])),W(g,"click",ce(l[17])),W(_,"click",ce(l[18])),W(L,"click",l[19]),W(p,"input",l[20]),W(d,"submit",ce(l[21]))],ee=!0)},p(r,m){if(he!==(he=we(r))&&(Q.d(1),Q=he(r),Q&&(Q.c(),Q.m(e,null))),m[0]&1408&&o!==(o=r[7]+r[8]===0&&!r[10])&&(a.disabled=o),m[0]&2&&C!==(C=(r[1]?"unmute":"mute")+"")&&pe(V,C),m[0]&2&&F(g,"active",r[1]),m[0]&32&&M!==(M=r[5].toFixed(2)+"")&&pe(j,M),m[0]&2&&(_.disabled=r[1]),m[0]&2&&F(_,"active",r[1]),m[0]&20928){te={length:ue};let i;for(i=0;i<te.length;i+=1){const H=Fe(r,te,i);v[i]?v[i].p(H,m):(v[i]=Ce(H),v[i].c(),v[i].m(L,null))}for(;i<v.length;i+=1)v[i].d(1);v.length=te.length}if(m[0]&2048){se=r[11];let i;for(i=0;i<se.length;i+=1){const H=Pe(r,se,i);y[i]?y[i].p(H,m):(y[i]=Ve(H),y[i].c(),y[i].m(d,U))}for(;i<y.length;i+=1)y[i].d(1);y.length=se.length}m[0]&16&&p.value!==r[4]&&Se(p,r[4])},i:ge,o:ge,d(r){r&&u(t),Q.d(),r&&u(J),r&&u(L),_e(v,r),r&&u(x),r&&u(d),_e(y,r),ee=!1,Ge(Ne)}}}const ye=1e4;let X=8,ue=8;function ke(l,t,e){return Math.min(Math.max(l,t),e)}const nt=(l,t)=>t-l;function rt(l,t,e){let s,a;He(l,et,b=>e(22,a=b));let n=0,o=0,c=0,g=!1,C=!1,V=!1,G=0;Ke(()=>{J(),window.f=(U,w)=>U*1.059463**w,window.r=(U,w)=>{for(var P=null,$=[],p=0;p<w;p++){var ee=Math.floor(U/w*p);$.push(ee===P?0:1),P=ee}return $},le().volume.set({value:ve(s)});const b=new Ae,T=new Ae,A=new We({urls:{C3:"/click.mp3"},release:1,baseUrl:Ue});T.set({oscillator:{type:"sine"},envelope:{attack:.2,decay:.5,release:1}}),T.set({detune:.1,volume:ve(.2),oscillator:{type:"square"},envelope:{attack:.05,decay:.1}}),b.connect(le()),T.connect(le()),A.connect(le()),e(6,n=Ye()),be.scheduleRepeat(U=>{e(6,n=U);let w=j(U,o*X+c,o,c);Array.isArray(w)&&w.forEach(P=>{P===0?A.triggerAttackRelease("C3","16n"):P>0?b.triggerAttackRelease(ke(P,1,ye),"8n"):T.triggerAttackRelease(ke(Math.abs(P),1,ye),"8n")}),e(7,o=(o+Math.floor((c+1)/X))%ue),e(8,c=(c+1)%X)},"8n")});let _=0,Y=ie[0].comments,M=ie[0].code,j;const Z=()=>{let b=new URLSearchParams(a.url.searchParams.toString());b.set("code",M),history.pushState(null,"",`?${b.toString()}`)},J=()=>{a.url.searchParams.has("code")&&e(4,M=a.url.searchParams.get("code")),a.url.searchParams.has("bpm")&&e(0,be.bpm.value=ke(a.url.searchParams.get("bpm"),1,500),qe)},L=(b,T)=>{const A=Math.abs(T/(ue*X));return b===0?(2-Ze(A)**2)/1.75:Je(1-Math.abs(b/ye))*(1-A/2)},x=async()=>{g||(await xe(),e(9,g=!0),console.log("Audio is ready!")),e(10,C=be.toggle().state==="started")},d=async()=>{be.stop(),e(10,C=!1),e(7,o=e(8,c=0))},z=()=>e(1,V=!V),oe=()=>e(2,G=(G+1)%4),ae=()=>e(3,_=(_+1)%ie.length);function B(){M=this.value,e(4,M),e(3,_)}const ne=()=>{Z()};return l.$$.update=()=>{var b,T,A;if(l.$$.dirty[0]&4&&e(5,s=(G+1)/4),l.$$.dirty[0]&3&&(le().mute=V),l.$$.dirty[0]&33&&((T=(b=le())==null?void 0:b.volume)==null||T.rampTo(ve(s))),l.$$.dirty[0]&8&&(e(4,M=ie[_].code),e(11,Y=(A=ie[_].comments)!=null?A:[])),l.$$.dirty[0]&16)try{e(12,j=new Function("t","i","m","b",`
			try { 
        with (Math)
          return [${M}].flat().splice(0,4).map(n => Number.parseFloat(n)).filter(n => n != null && !Number.isNaN(n));
			} catch(error){
				return [0];
			}`))}catch{e(12,j=()=>[0])}},[qe,V,G,_,M,s,n,o,c,g,C,Y,j,Z,L,x,d,z,oe,ae,B,ne]}class ut extends ze{constructor(t){super();Qe(this,t,rt,at,Xe,{},null,[-1,-1])}}export{ut as default};
