import{S as Te,i as Re,s as He,l as ne,g as w,e as y,k as U,c as E,a as v,m as F,d as h,b as n,N as C,I as m,O as oe,t as te,h as le,j as Be,f as se,P as ae,Q as X,R as he,M as ue,T as Ie,v as Le,U as Y,V as me,W as pe,X as Se,Y as ge,Z as Ve,_ as Ue,$ as Fe,G as L,H as S,a0 as be}from"../chunks/vendor-be97d11c.js";import{b as Ce}from"../chunks/paths-4b3c6e7e.js";const re=[{comments:["timb(re) - musical creative coding","click play and then on the dots above to see/hear more!"],code:"[[0,4,7,9].map(n=>f(220,n))[m%2+b%3],-[55,69][r(1,5)[i%5]]]"},{comments:["each dot is a beat, to play a note","return a frequency from 1 to 20000 hz"],code:"440"},{comments:["frequencies > 0 use a sine wave","while negative frequencies use a square wave"],code:"-440"},{comments:["return 0 for a click","this can be useful for drum rhythms"],code:"0"},{comments:["`m` is the current measure (0-7)","and `b`, the beat in the current mesasure (0-7)"],code:"(1+m%2)*110*[1,2,3,4][b%4]"},{comments:["`t` is for time","and `i` is index (0-63)"],code:"440+t*[0,1,2,1][i%4]"},{comments:["NaN and other non number values are rest notes","this allows for intesting rhythms"],code:"440*[2,1,1,NaN,1,1,NaN,1][i%8]"},{comments:["returning an array plays all frequencies as a chord","you can play a maximum of 4 notes at the same time"],code:"[[440,220,110],[220,110,880]][m%2]"},{comments:["`f(b,i)` gives you `i` semitones from base frequency `b`","nb. 440Hz is a4. MAKE THIS A BETTER MSG"],code:"[0,3,5,7].map(n=>f(440,n))[b%4]"},{comments:["`r(o,t)` gives indexes for euclidean rhythm patterns","EXPLAIN THIS BETTER goto /about for more"],code:"[NaN,0][r(3,8)[b]]"},{comments:["`Math` functions are available in scope","more room for creativity WRITE SOMETHING INTERESTING"],code:"440+110*sin(t)+220*cos(2*t)"},{comments:["an attempt at twinkle twinkle little star","can you make it nicer/smaller/better?"],code:"[...'0077997~5544220~7755442~7755442~'].map(n=>f(440,n))[i%32]"},{comments:["now its your turn","remember that you are limited to 64 bytes"],code:"'HAVE FUN :)'"}];function ze(o,e,t){const l=o.slice();return l[18]=e[t],l}function we(o,e,t){const l=o.slice();return l[21]=e[t],l[23]=t,l}function ke(o,e,t){const l=o.slice();l[21]=e[t],l[28]=t;const s=l[5]*D+l[6];l[24]=s;const a=l[23]*D+l[28];l[25]=a;const r=l[9](l[4],l[25],l[23],l[28]).sort(Ke);return l[26]=r,l}function ye(o,e,t){const l=o.slice();return l[21]=e[t],l[30]=t,l}function Oe(o){let e,t;return{c(){e=L("svg"),t=L("path"),this.h()},l(l){e=S(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var s=v(e);t=S(s,"path",{d:!0,stroke:!0,"stroke-linejoin":!0}),v(t).forEach(h),s.forEach(h),this.h()},h(){n(t,"d","M4.5 12.5v-10l7 5-7 5z"),n(t,"stroke","currentColor"),n(t,"stroke-linejoin","round"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-c3qlzz")},m(l,s){w(l,e,s),m(e,t)},d(l){l&&h(e)}}}function Pe(o){let e,t;return{c(){e=L("svg"),t=L("path"),this.h()},l(l){e=S(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var s=v(e);t=S(s,"path",{d:!0,stroke:!0}),v(t).forEach(h),s.forEach(h),this.h()},h(){n(t,"d","M5.5 3v9m4-9v9"),n(t,"stroke","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-c3qlzz")},m(l,s){w(l,e,s),m(e,t)},d(l){l&&h(e)}}}function De(o){let e,t;return{c(){e=L("svg"),t=L("path"),this.h()},l(l){e=S(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var s=v(e);t=S(s,"path",{d:!0,fill:!0}),v(t).forEach(h),s.forEach(h),this.h()},h(){n(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1z"),n(t,"fill","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-c3qlzz")},m(l,s){w(l,e,s),m(e,t)},d(l){l&&h(e)}}}function je(o){let e,t;return{c(){e=L("svg"),t=L("path"),this.h()},l(l){e=S(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var s=v(e);t=S(s,"path",{d:!0,fill:!0}),v(t).forEach(h),s.forEach(h),this.h()},h(){n(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1zm2-2v7h1V4h-1z"),n(t,"fill","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-c3qlzz")},m(l,s){w(l,e,s),m(e,t)},d(l){l&&h(e)}}}function Ge(o){let e,t;return{c(){e=L("svg"),t=L("path"),this.h()},l(l){e=S(l,"svg",{viewBox:!0,fill:!0,xmlns:!0,width:!0,height:!0,class:!0});var s=v(e);t=S(s,"path",{d:!0,fill:!0}),v(t).forEach(h),s.forEach(h),this.h()},h(){n(t,"d","M3.5 10.494l.257-.429-.119-.07H3.5v.5zm0-5.996v.5h.138l.12-.071-.258-.429zm5-2.998H9a.5.5 0 00-.757-.429L8.5 1.5zm0 11.992l-.257.429A.5.5 0 009 13.492h-.5zm-5-3.498h-2v1h2v-1zm-2 0a.5.5 0 01-.5-.5H0c0 .83.672 1.5 1.5 1.5v-1zm-.5-.5V5.498H0v3.998h1zm0-3.997a.5.5 0 01.5-.499v-1a1.5 1.5 0 00-1.5 1.5h1zm.5-.499h2v-1h-2v1zm2.257-.071l5-2.998-.514-.858-5 2.998.514.858zM8 1.5v11.992h1V1.5H8zm.757 11.563l-5-2.998-.514.858 5 2.998.514-.858zM10 6v3h1V6h-1zm2-2v7h1V4h-1zm2-2v11h1V2h-1z"),n(t,"fill","currentColor"),n(e,"viewBox","0 0 15 15"),n(e,"fill","none"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"width","15"),n(e,"height","15"),n(e,"class","svelte-c3qlzz")},m(l,s){w(l,e,s),m(e,t)},d(l){l&&h(e)}}}function Xe(o){let e;return{c(){e=y("div"),this.h()},l(t){e=E(t,"DIV",{class:!0,style:!0}),v(e).forEach(h),this.h()},h(){n(e,"class","note svelte-c3qlzz"),se(e,"--index",o[30]),se(e,"--scale",be(Math.abs(1-o[26][o[30]]/ce))),C(e,"overlay",o[30]>0),C(e,"click",o[26][o[30]]===0),C(e,"triangle",o[26][o[30]]<0)},m(t,l){w(t,e,l)},p(t,l){l&528&&se(e,"--scale",be(Math.abs(1-t[26][t[30]]/ce))),l&528&&C(e,"click",t[26][t[30]]===0),l&528&&C(e,"triangle",t[26][t[30]]<0)},d(t){t&&h(e)}}}function Qe(o){let e;return{c(){e=y("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){n(e,"class","note rest svelte-c3qlzz")},m(t,l){w(t,e,l)},p:ue,d(t){t&&h(e)}}}function Ee(o){let e,t;function l(r,i){return i&528&&(e=null),e==null&&(e=!!(r[26][r[30]]===null||Number.isNaN(r[26][r[30]]))),e?Qe:Xe}let s=l(o,-1),a=s(o);return{c(){a.c(),t=ne()},l(r){a.l(r),t=ne()},m(r,i){a.m(r,i),w(r,t,i)},p(r,i){s===(s=l(r,i))&&a?a.p(r,i):(a.d(1),a=s(r),a&&(a.c(),a.m(t.parentNode,t)))},d(r){a.d(r),r&&h(t)}}}function Me(o){let e,t,l={length:o[26].length||0},s=[];for(let a=0;a<l.length;a+=1)s[a]=Ee(ye(o,l,a));return{c(){e=y("div");for(let a=0;a<s.length;a+=1)s[a].c();t=U(),this.h()},l(a){e=E(a,"DIV",{class:!0});var r=v(e);for(let i=0;i<s.length;i+=1)s[i].l(r);t=F(r),r.forEach(h),this.h()},h(){n(e,"class","beat svelte-c3qlzz"),C(e,"indicator",o[24]===o[25])},m(a,r){w(a,e,r);for(let i=0;i<s.length;i+=1)s[i].m(e,null);m(e,t)},p(a,r){if(r&528){l={length:a[26].length||0};let i;for(i=0;i<l.length;i+=1){const _=ye(a,l,i);s[i]?s[i].p(_,r):(s[i]=Ee(_),s[i].c(),s[i].m(e,t))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}r&96&&C(e,"indicator",a[24]===a[25])},d(a){a&&h(e),oe(s,a)}}}function qe(o){let e,t={length:D},l=[];for(let s=0;s<t.length;s+=1)l[s]=Me(ke(o,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=ne()},l(s){for(let a=0;a<l.length;a+=1)l[a].l(s);e=ne()},m(s,a){for(let r=0;r<l.length;r+=1)l[r].m(s,a);w(s,e,a)},p(s,a){if(a&624){t={length:D};let r;for(r=0;r<t.length;r+=1){const i=ke(s,t,r);l[r]?l[r].p(i,a):(l[r]=Me(i),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(s){oe(l,s),s&&h(e)}}}function Ne(o){let e,t,l=o[18]+"",s;return{c(){e=y("label"),t=te("// "),s=te(l),this.h()},l(a){e=E(a,"LABEL",{for:!0,class:!0});var r=v(e);t=le(r,"// "),s=le(r,l),r.forEach(h),this.h()},h(){n(e,"for","code"),n(e,"class","comment svelte-c3qlzz")},m(a,r){w(a,e,r),m(e,t),m(e,s)},p(a,r){r&256&&l!==(l=a[18]+"")&&Be(s,l)},d(a){a&&h(e)}}}function We(o){let e,t,l,s,a,r,i,_,T,d,M,q,Q,Z,V,x,J,H,$,ee,p,R,O;function W(c,f){return c[7]?Pe:Oe}let j=W(o),k=j(o);function N(c,f){return c[1]>=.65?Ge:c[1]>=.35?je:De}let b=N(o),A=b(o),B={length:ie},g=[];for(let c=0;c<B.length;c+=1)g[c]=qe(we(o,B,c));let K=o[8],z=[];for(let c=0;c<K.length;c+=1)z[c]=Ne(ze(o,K,c));return{c(){e=y("form"),t=y("button"),k.c(),l=U(),s=y("button"),A.c(),a=U(),r=y("input"),i=U(),_=y("div");for(let c=0;c<g.length;c+=1)g[c].c();T=U(),d=y("form");for(let c=0;c<z.length;c+=1)z[c].c();M=U(),q=y("label"),Q=te("// hit `enter` to save your tune in the URL"),Z=U(),V=y("label"),x=te("// to learn more about what you can do click here"),J=U(),H=y("label"),$=te("(t,i,m,b) =>"),ee=U(),p=y("input"),this.h()},l(c){e=E(c,"FORM",{});var f=v(e);t=E(f,"BUTTON",{class:!0});var u=v(t);k.l(u),u.forEach(h),l=F(f),s=E(f,"BUTTON",{class:!0});var P=v(s);A.l(P),P.forEach(h),a=F(f),r=E(f,"INPUT",{type:!0,name:!0,step:!0,min:!0,max:!0,id:!0}),f.forEach(h),i=F(c),_=E(c,"DIV",{class:!0,style:!0});var fe=v(_);for(let G=0;G<g.length;G+=1)g[G].l(fe);fe.forEach(h),T=F(c),d=E(c,"FORM",{class:!0});var I=v(d);for(let G=0;G<z.length;G+=1)z[G].l(I);M=F(I),q=E(I,"LABEL",{for:!0,class:!0});var ve=v(q);Q=le(ve,"// hit `enter` to save your tune in the URL"),ve.forEach(h),Z=F(I),V=E(I,"LABEL",{for:!0,class:!0});var _e=v(V);x=le(_e,"// to learn more about what you can do click here"),_e.forEach(h),J=F(I),H=E(I,"LABEL",{id:!0,for:!0,class:!0});var de=v(H);$=le(de,"(t,i,m,b) =>"),de.forEach(h),ee=F(I),p=E(I,"INPUT",{id:!0,name:!0,type:!0,spellcheck:!0,autocomplete:!0,class:!0}),I.forEach(h),this.h()},h(){n(t,"class","svelte-c3qlzz"),n(s,"class","mute-button svelte-c3qlzz"),C(s,"active",o[0]),n(r,"type","range"),n(r,"name",""),n(r,"step","0.05"),n(r,"min","0.0"),n(r,"max","1.0"),r.disabled=o[0],n(r,"id",""),n(_,"class","container svelte-c3qlzz"),se(_,"--beats",D),se(_,"--meausures",ie),n(q,"for","code"),n(q,"class","comment focused svelte-c3qlzz"),n(V,"for","code"),n(V,"class","comment focused svelte-c3qlzz"),n(H,"id","label"),n(H,"for","input"),n(H,"class","svelte-c3qlzz"),n(p,"id","input"),n(p,"name","code"),n(p,"type","text"),n(p,"spellcheck","false"),n(p,"autocomplete","off"),n(p,"class","svelte-c3qlzz"),n(d,"class","editor svelte-c3qlzz")},m(c,f){w(c,e,f),m(e,t),k.m(t,null),m(e,l),m(e,s),A.m(s,null),m(e,a),m(e,r),ae(r,o[1]),w(c,i,f),w(c,_,f);for(let u=0;u<g.length;u+=1)g[u].m(_,null);w(c,T,f),w(c,d,f);for(let u=0;u<z.length;u+=1)z[u].m(d,null);m(d,M),m(d,q),m(q,Q),m(d,Z),m(d,V),m(V,x),m(d,J),m(d,H),m(H,$),m(d,ee),m(d,p),ae(p,o[3]),R||(O=[X(t,"click",he(o[11])),X(s,"click",he(o[12])),X(r,"change",o[13]),X(r,"input",o[13]),X(_,"click",o[14]),X(p,"input",o[15]),X(d,"submit",he(o[16]))],R=!0)},p(c,[f]){if(j!==(j=W(c))&&(k.d(1),k=j(c),k&&(k.c(),k.m(t,null))),b!==(b=N(c))&&(A.d(1),A=b(c),A&&(A.c(),A.m(s,null))),f&1&&C(s,"active",c[0]),f&1&&(r.disabled=c[0]),f&2&&ae(r,c[1]),f&624){B={length:ie};let u;for(u=0;u<B.length;u+=1){const P=we(c,B,u);g[u]?g[u].p(P,f):(g[u]=qe(P),g[u].c(),g[u].m(_,null))}for(;u<g.length;u+=1)g[u].d(1);g.length=B.length}if(f&256){K=c[8];let u;for(u=0;u<K.length;u+=1){const P=ze(c,K,u);z[u]?z[u].p(P,f):(z[u]=Ne(P),z[u].c(),z[u].m(d,M))}for(;u<z.length;u+=1)z[u].d(1);z.length=K.length}f&8&&p.value!==c[3]&&ae(p,c[3])},i:ue,o:ue,d(c){c&&h(e),k.d(),A.d(),c&&h(i),c&&h(_),oe(g,c),c&&h(T),c&&h(d),oe(z,c),R=!1,Ie(O)}}}const ce=2e4,D=8,ie=8;function Ae(o,e,t){return Math.min(Math.max(o,e),t)}const Ke=(o,e)=>e-o;function Ye(o,e,t){let l=0,s=0,a=0,r=!1,i=!1,_=.1;Le(()=>{Z(),window.f=(k,N)=>k*1.059463**N,window.r=(k,N)=>{for(var b=null,A=[],B=0;B<N;B++){var g=Math.floor(k/N*B);A.push(g===b?0:1),b=g}return A},Y().volume.set({value:me(_)});const p=new pe,R=new pe,O=new Se({urls:{C3:"click.mp3"},release:1,baseUrl:Ce});R.set({oscillator:{type:"sine"},envelope:{attack:.2,decay:.5,release:1}}),R.set({detune:.1,volume:me(.5),oscillator:{type:"square"},envelope:{attack:.05,decay:.1}}),p.connect(Y()),R.connect(Y()),O.connect(Y()),ge.scheduleRepeat(k=>{let N=q(k,s*D+a,s,a);Array.isArray(N)&&(N=N.splice(0,4).map(b=>Number.parseFloat(b)).filter(b=>b!==null&&!Number.isNaN(b)),N.forEach(b=>{b===0?O.triggerAttackRelease("C3","16n"):b>0?p.triggerAttackRelease(Ae(b,1,ce),"8n"):R.triggerAttackRelease(Ae(Math.abs(b),1,ce),"8n")})),t(5,s=(s+Math.floor((a+1)/D))%ie),t(6,a=(a+1)%D)},"8n");let W=requestAnimationFrame(j);function j(){W=requestAnimationFrame(j),t(4,l=Ve())}return()=>cancelAnimationFrame(W)});let T=0,d=re[0].comments,M=re[0].code,q;const Q=()=>history.pushState(null,"",`#${encodeURIComponent(M)}`),Z=()=>{location.hash&&t(3,M=decodeURIComponent(location.hash.slice(1)))},V=async()=>{await Ue(),console.log("audio is ready"),t(7,r=ge.toggle().state==="started")},x=()=>t(0,i=!i);function J(){_=Fe(this.value),t(1,_)}const H=()=>t(2,T=(T+1)%re.length);function $(){M=this.value,t(3,M),t(2,T)}const ee=()=>{Q()};return o.$$.update=()=>{var p,R,O;if(o.$$.dirty&1&&(Y().mute=i),o.$$.dirty&2&&((R=(p=Y())==null?void 0:p.volume)==null||R.rampTo(me(_),.05)),o.$$.dirty&4&&(t(3,M=re[T].code),t(8,d=(O=re[T].comments)!=null?O:[])),o.$$.dirty&8)try{t(9,q=new Function("t","i","m","b",`
			try { 
        with (Math)
          return [${M}].flat()
			} catch(error){
				return [0];
			}`))}catch{t(9,q=()=>[0])}},[i,_,T,M,l,s,a,r,d,q,Q,V,x,J,H,$,ee]}class Je extends Te{constructor(e){super();Re(this,e,Ye,We,He,{})}}export{Je as default};
